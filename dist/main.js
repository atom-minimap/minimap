var t=s(require("path")),e=require("atom"),n=c({},e),{CompositeDisposable:i,Disposable:r,Emitter:o}=e;function s(t){return t&&t.__esModule?t.default:t}function a(t){Object.defineProperty(t,"__esModule",{value:!0})}function u(t,e,n){Object.defineProperty(t,e,{get:n,enumerable:!0})}function c(t,e){return Object.keys(e).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})})),t}var l,h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},d=!1;var f,p={},g=!1;function m(){return g||(g=!0,function(){f=function(){function t(t,e,n){this.message=t,this.fileName=e,this.lineNumber=n,this.callCount=0,this.stackCount=0,this.stacks={},this.stackCallCounts={}}return t.getFunctionNameFromCallsite=function(t){},t.deserialize=function(e){var n,i,r,o,s,a,u,c;for(o=e.message,i=e.fileName,r=e.lineNumber,a=e.stacks,n=new t(o,i,r),u=0,c=a.length;u<c;u++)s=a[u],n.addStack(s,s.metadata);return n},t.prototype.getFunctionNameFromCallsite=function(t){var e,n,i;return null!=t.functionName?t.functionName:t.isToplevel()?null!=(e=t.getFunctionName())?e:"<unknown>":t.isConstructor()?"new "+t.getFunctionName():t.getMethodName()&&!t.getFunctionName()?t.getMethodName():t.getTypeName()+"."+(null!=(n=null!=(i=t.getMethodName())?i:t.getFunctionName())?n:"<anonymous>")},t.prototype.getLocationFromCallsite=function(t){return null==t?"unknown":null!=t.location?t.location:t.isNative()?"native":t.isEval()?"eval at "+this.getLocationFromCallsite(t.getEvalOrigin()):t.getFileName()+":"+t.getLineNumber()+":"+t.getColumnNumber()},t.prototype.getFileNameFromCallSite=function(t){var e;return null!=(e=t.fileName)?e:t.getFileName()},t.prototype.getOriginName=function(){return this.originName},t.prototype.getMessage=function(){return this.message},t.prototype.getStacks=function(){var t,e,n,i,r;for(t in n=[],r=this.stacks)i=r[t],(e=this.parseStack(i)).callCount=this.stackCallCounts[t],e.metadata=i.metadata,n.push(e);return n},t.prototype.getStackCount=function(){return this.stackCount},t.prototype.getCallCount=function(){return this.callCount},t.prototype.addStack=function(t,e){var n,i,r;return null==this.originName&&(this.originName=this.getFunctionNameFromCallsite(t[0])),null==this.fileName&&(this.fileName=this.getFileNameFromCallSite(t[0])),null==this.lineNumber&&(this.lineNumber="function"==typeof(i=t[0]).getLineNumber?i.getLineNumber():void 0),this.callCount++,t.metadata=e,n=this.getLocationFromCallsite(t[1]),null==this.stacks[n]&&(this.stacks[n]=t,this.stackCount++),null==(r=this.stackCallCounts)[n]&&(r[n]=0),this.stackCallCounts[n]++},t.prototype.parseStack=function(t){return t.map((e=this,function(t){return{functionName:e.getFunctionNameFromCallsite(t),location:e.getLocationFromCallsite(t),fileName:e.getFileNameFromCallSite(t)}}));var e},t.prototype.serialize=function(){return{message:this.getMessage(),lineNumber:this.lineNumber,fileName:this.fileName,stacks:this.getStacks()}},t}()}.call(f={})),f}var v,y=!1;function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),t}function w(){v={},v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.disposed=!1,this.disposalAction=e}return S(t,null,[{key:"isDisposable",value:function(t){return"function"==typeof(null!=t?t.dispose:void 0)}}]),S(t,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,"function"==typeof this.disposalAction&&this.disposalAction(),this.disposalAction=null)}}]),t}()}function x(){return y||(y=!0,w()),v}var C,E,T=!1;function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function M(t){if(null==E&&(E=x()),!E.isDisposable(t))throw new TypeError("Arguments to CompositeDisposable.add must have a .dispose() method")}function L(){C={},C=function(){function t(){k(this,t),this.disposed=!1,this.disposables=new Set;var e=!0,n=!1,i=void 0;try{for(var r,o=arguments[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;this.add(s)}}catch(t){n=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}}var e,n,i;return e=t,(n=[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposables.forEach((function(t){return t.dispose()})),this.disposables=null)}},{key:"add",value:function(){if(!this.disposed){var t=!0,e=!1,n=void 0;try{for(var i,r=arguments[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;M(o),this.disposables.add(o)}}catch(t){e=!0,n=t}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}}}},{key:"remove",value:function(t){this.disposed||this.disposables.delete(t)}},{key:"delete",value:function(t){this.remove(t)}},{key:"clear",value:function(){this.disposed||this.disposables.clear()}}])&&D(e.prototype,n),i&&D(e,i),t}()}function A(){return T||(T=!0,L()),C}var R,O,_,P,I=!1;function H(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function N(t,e,n){return e&&H(t.prototype,e),n&&H(t,n),t}function F(){R={},O=x(),_=A(),(P=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.disposed=!1,this.clear()}return N(t,null,[{key:"onEventHandlerException",value:function(t){var e=this;return 0===this.exceptionHandlers.length&&(this.dispatch=this.exceptionHandlingDispatch),this.exceptionHandlers.push(t),new O((function(){if(e.exceptionHandlers.splice(e.exceptionHandlers.indexOf(t),1),0===e.exceptionHandlers.length)return e.dispatch=e.simpleDispatch}))}},{key:"simpleDispatch",value:function(t,e){return t(e)}},{key:"exceptionHandlingDispatch",value:function(t,e){try{return t(e)}catch(t){return this.exceptionHandlers.map((function(e){return e(t)}))}}}]),N(t,[{key:"clear",value:function(){null!=this.subscriptions&&this.subscriptions.dispose(),this.subscriptions=new _,this.handlersByEventName={}}},{key:"dispose",value:function(){this.subscriptions.dispose(),this.handlersByEventName=null,this.disposed=!0}},{key:"on",value:function(t,e,n){var i=this;if(null==n&&(n=!1),this.disposed)throw new Error("Emitter has been disposed");if("function"!=typeof e)throw new Error("Handler must be a function");this.handlersByEventName[t]?n?this.handlersByEventName[t].unshift(e):this.handlersByEventName[t].push(e):this.handlersByEventName[t]=[e];var r=new O((function(){return i.subscriptions.remove(r),i.off(t,e)}));return this.subscriptions.add(r),r}},{key:"once",value:function(t,e,n){null==n&&(n=!1);var i=this.on(t,(function(t){return i.dispose(),e(t)}),n);return i}},{key:"preempt",value:function(t,e){return this.on(t,e,!0)}},{key:"off",value:function(t,e){if(!this.disposed){var n=this.handlersByEventName[t];if(n){var i=n.indexOf(e);i>=0&&n.splice(i,1),0===n.length&&delete this.handlersByEventName[t]}}}},{key:"emit",value:function(t,e){var n=this.handlersByEventName&&this.handlersByEventName[t];if(n)for(var i=n.slice(),r=0;r<i.length;r++)this.constructor.dispatch(i[r],e)}},{key:"emitAsync",value:function(t,e){var n=this,i=this.handlersByEventName&&this.handlersByEventName[t];if(i){var r=i.map((function(t){return n.constructor.dispatch(t,e)}));return Promise.all(r).then((function(){}))}return Promise.resolve()}},{key:"getEventNames",value:function(){return Object.keys(this.handlersByEventName)}},{key:"listenerCountForEventName",value:function(t){var e=this.handlersByEventName[t];return null==e?0:e.length}},{key:"getTotalListenerCount",value:function(){for(var t=0,e=Object.keys(this.handlersByEventName),n=0;n<e.length;n++){var i=e[n];t+=this.handlersByEventName[i].length}return t}}]),t}()).dispatch=P.simpleDispatch,P.exceptionHandlers=[],R=P}var j,W,B,q,z=!1;function U(){j={},I||(I=!0,F()),W=R,j.Emitter=W,B=x(),j.Disposable=B,q=A(),j.CompositeDisposable=q}var V,$=!1;function Q(){(function(){var t,e,n,i;t=m(),null==h.__grim__&&(e=(z||(z=!0,U()),j).Emitter,i=h.__grim__={deprecations:{},emitter:new e,includeDeprecatedAPIs:!0,getDeprecations:function(){var t,e,n,r,o,s,a,u;for(o in e=[],u=i.deprecations)for(s in n=u[o])for(a in r=n[s])t=r[a],e.push(t);return e},getDeprecationsLength:function(){return this.getDeprecations().length},clearDeprecations:function(){i.deprecations={}},logDeprecations:function(){var t,e,n,i;for((e=this.getDeprecations()).sort((function(t,e){return e.getCallCount()-t.getCallCount()})),console.warn("\nCalls to deprecated functions\n-----------------------------"),n=0,i=e.length;n<i;n++)t=e[n],console.warn("("+t.getCallCount()+") "+t.getOriginName()+" : "+t.getMessage(),t)},deprecate:function(e,r){var o,s,a,u,c,l,h,d,f,p,g,m,v;l=Error.stackTraceLimit;try{Error.stackTraceLimit=7,d=(d=null!=(m="function"==typeof(a=new Error).getRawStack?a.getRawStack():void 0)?m:n(a)).slice(1)}finally{Error.stackTraceLimit=l}u=(s=d[0]).getFileName(),c=s.getLineNumber(),h=null!=(v=null!=r?r.packageName:void 0)?v:"",null==(f=i.deprecations)[u]&&(f[u]={}),null==(p=i.deprecations[u])[c]&&(p[c]={}),null==(g=i.deprecations[u][c])[h]&&(g[h]=new t(e)),(o=i.deprecations[u][c][h]).addStack(d,r),i.emitter.emit("updated",o)},addSerializedDeprecation:function(e){var n,r,o,s,a,u,c,l,h,d,f,p,g,m,v;for(s=(n=t.deserialize(e)).getMessage(),r=n.fileName,o=n.lineNumber,a=null!=(g=null!=(m=(c=n.getStacks())[0])&&null!=(v=m.metadata)?v.packageName:void 0)?g:"",null==(l=i.deprecations)[r]&&(l[r]={}),null==(h=i.deprecations[r])[o]&&(h[o]={}),null==(d=i.deprecations[r][o])[a]&&(d[a]=new t(s,r,o)),n=i.deprecations[r][o][a],f=0,p=c.length;f<p;f++)u=c[f],n.addStack(u,u.metadata);i.emitter.emit("updated",n)},on:function(t,e){return i.emitter.on(t,e)}}),n=function(t){var e,i;return e=Error.prepareStackTrace,Error.prepareStackTrace=function(t,e){return e},Error.captureStackTrace(t,n),i=t.stack,Error.prepareStackTrace=e,i},V=h.__grim__}).call(V={})}var K,G=!1;function Z(){(function(){var t,e,n,i;({deprecate:i}=($||($=!0,Q()),V)),null!=h.__CUSTOM_HTML_ELEMENTS_CLASSES__?(h.__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__=h.__CUSTOM_HTML_ELEMENTS_CLASSES__,delete h.__CUSTOM_HTML_ELEMENTS_CLASSES__):null==h.__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__&&(h.__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__={}),t=["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"],n=function(e,n){return t.forEach((function(t){return Object.defineProperty(e,t,{value:function(){var e;return null!=(e=this[`__${t}`])?e.apply(this,arguments):void 0},writable:!0,enumerable:!0,configurable:!0})})),Object.getOwnPropertyNames(n).forEach((function(i){var r;if("constructor"!==i)return r=Object.getOwnPropertyDescriptor(n,i),t.indexOf(i)>-1?Object.defineProperty(e,`__${i}`,r):Object.defineProperty(e,i,r)}))},e=function(t,e){return Object.getOwnPropertyNames(e).forEach((function(n){var i;if("length"!==n&&"name"!==n&&"arguments"!==n&&"caller"!==n&&"prototype"!==n)return i=Object.getOwnPropertyDescriptor(e,n),Object.defineProperty(t,n,i)}))},K=function(t,r){var o,s,a,u,c;return({class:a}=r),(u=null!=a?a.prototype:null!=(c=r.prototype)?c:r)===r&&i("Using the prototype as the second argument is deprecated, use the prototype option instead"),__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__[t]?(o=__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__[t],n(o.prototype,u),null!=a&&e(o,a),o):(s=Object.create(HTMLElement.prototype),n(s,u),o=document.registerElement(t,{prototype:Object.create(s)}),null!=a&&e(o,a),__ATOM_UTILS_CUSTOM_ELEMENT_CLASSES__[t]=o)}}).call(K={})}var Y,X=!1;function J(){return X||(X=!0,function(){var t,e,n,i;for(i in Y=n=function(){function n(){"function"==typeof this.extended&&this.extended()}return n.includeInto=function(e){var n,i,r;for(n in this.extend(e.prototype),this)i=this[n],-1===t.indexOf(n)&&(e.hasOwnProperty(n)||(e[n]=i));return null!=(r=this.included)?r.call(e):void 0},n.extend=function(t){var n,i,r,o,s;for(i=0,r=(o=Object.getOwnPropertyNames(this.prototype)).length;i<r;i++)n=o[i],-1===e.indexOf(n)&&(t.hasOwnProperty(n)||(t[n]=this.prototype[n]));return null!=(s=this.prototype.extended)?s.call(t):void 0},n}(),t=["__super__"],n)t.push(i);e=["constructor","extended"]}.call(Y={})),Y}var tt,et=!1;function nt(){return et||(et=!0,function(){var t;t=J(),tt=class e extends t{static parents(t,e="*"){var n;return n=[],this.eachParent(t,(function(t){if("function"==typeof t.matches?t.matches(e):void 0)return n.push(t)})),n}static eachParent(t,e){var n,i;for(null!=(n=t.parentNode)&&e(n),i=[];n=n.parentNode;)null!=n?i.push(e(n)):i.push(void 0);return i}parents(t="*"){return e.parents(this,t)}queryParentSelectorAll(t){if(null==t)throw new Error("::queryParentSelectorAll requires a valid selector as argument");return this.parents(t)}queryParentSelector(t){if(null==t)throw new Error("::queryParentSelector requires a valid selector as argument");return this.queryParentSelectorAll(t)[0]}eachParent(t){return e.eachParent(this,t)}}}.call(tt={})),tt}var it,rt=!1;function ot(){return rt||(rt=!0,function(){var t,e;e=J(),({Disposable:t}=n),it=class extends e{addDisposableEventListener(e,n,i,r){return e.addEventListener(n,i,r),new t((function(){return e.removeEventListener(n,i)}))}}}.call(it={})),it}var st,at=!1;function ut(){return at||(at=!0,function(){var t,e,i,r,o,s;r=J(),i=ot(),({Disposable:e,CompositeDisposable:t}=n),s=function(t,e){var n,i,r;for(n in i=[],t)r=t[n],i.push(e(n,r));return i},o="__NONE__",st=function(){class t extends r{subscribeTo(t,n,i,r){var a,u;return t instanceof HTMLElement||([t,n,i,r]=[this,t,n,i]),"object"==typeof n&&([i,n,r]=[n,o,i]),null==this.eventsMap&&(this.eventsMap=new WeakMap),null==this.disposablesMap&&(this.disposablesMap=new WeakMap),null==this.eventsMap.get(t)&&this.eventsMap.set(t,{}),null==this.disposablesMap.get(t)&&this.disposablesMap.set(t,{}),u=this.eventsMap.get(t),a=this.disposablesMap.get(t),s(i,((e,i)=>(null==u[e]&&(u[e]={},a[e]=this.createEventListener(t,e,r)),u[e][n]=i))),new e((()=>this.unsubscribeFrom(t,n,i)))}unsubscribeFrom(t,e,n){var i,r,s;if(t instanceof HTMLElement||([t,e,n]=[this,t,e]),"object"==typeof e&&([n,e]=[e,o]),s=this.eventsMap.get(t)){for(r in n)delete s[r][e],0===Object.keys(s[r]).length&&((i=this.disposablesMap.get(t))[r].dispose(),delete i[r],delete s[r]);return 0===Object.keys(s).length?(this.eventsMap.delete(t),this.disposablesMap.delete(t)):void 0}}createEventListener(t,e,n){var i;return i=n=>{var i,r,o;if(i=null!=(r=this.eventsMap.get(t))?r[e]:void 0)return({target:o}=n),this.decorateEvent(n),this.eachSelectorFromTarget(n,o,i),n.isPropagationStopped||"function"==typeof i.__NONE__&&i.__NONE__(n),!0},this.addDisposableEventListener(t,e,i,n)}eachSelectorFromTarget(t,e,n){return this.nodeAndItsAncestors(e,(e=>{if(!t.isPropagationStopped)return this.eachSelector(n,((n,i)=>{var r;if(r=this.targetMatch(e,n),!t.isImmediatePropagationStopped&&r)return i(t)}))}))}eachSelector(t,e){var n,i,r,s;for(-1!==(r=Object.keys(t)).indexOf(o)&&r.splice(r.indexOf(o),1),r.sort((function(t,e){return e.split(" ").length-t.split(" ").length})),n=0,s=r.length;n<s;n++)if(e(i=r[n],t[i]))return!0;return!1}targetMatch(t,e){var n;if(t.matches(e))return!0;for(n=t.parentNode;null!=n&&null!=n.matches;){if(n.matches(e))return!0;n=n.parentNode}return!1}nodeAndItsAncestors(t,e){var n,i;for(n=t.parentNode,e(t),i=[];null!=n&&null!=n.matches;)e(n),i.push(n=n.parentNode);return i}decorateEvent(t){var e,n;return e=Event.prototype.stopPropagation,t.stopPropagation=function(){return this.isPropagationStopped=!0,e.apply(this,arguments)},n=Event.prototype.stopImmediatePropagation,t.stopImmediatePropagation=function(){return this.isImmediatePropagationStopped=!0,n.apply(this,arguments)}}}return i.includeInto(t),t}.call(this)}.call(st={})),st}var ct,lt=!1;function ht(){return lt||(lt=!0,function(){var t,e,n,i,r,o,s;n=J(),o="a abbr address article aside audio b bdi bdo blockquote body button canvas caption cite code colgroup datalist dd del details dfn dialog div dl dt em fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header html i iframe ins kbd label legend li main map mark menu meter nav noscript object ol optgroup option output p pre progress q rp rt ruby s samp script section select small span strong style sub summary sup table tbody td textarea tfoot th thead time title tr u ul var video area base br col command embed hr img input keygen link meta param source track wbr".split(/\s+/),i={},"area base br col command embed hr img input keygen link meta param source track wbr".split(/\s+/).forEach((function(t){return i[t]=!0})),"blur change click dblclick error focus input keydown keypress keyup load mousedown mousemove mouseout mouseover mouseup resize scroll select submit unload".split(/\s+/),t=class extends n{buildContent(){if(null!=this.constructor.content)return r.buildContent(this,this.constructor.content)}},ct=r=function(){class e extends n{static includeInto(t){return super.includeInto(t),Object.defineProperty(t,"content",{enumerable:!1,get:function(){return this.prototype.__content__},set:function(t){return this.prototype.__content__=t}}),Object.defineProperty(t.prototype,"createdCallback",{enumerable:!0,get:function(){return this.__create__},set:function(t){return this.__createdCallback__=t}}),Object.defineProperty(t.prototype,"__create__",{enumerable:!0,value:function(){if(null!=this.__content__&&e.buildContent(this,this.__content__),null!=this.__createdCallback__)return this.__createdCallback__()}}),t.useShadowRoot=function(){return t.prototype.__useShadowRoot__=!0}}static buildContent(t,e){var n,i,r;return r=new s,e.call(r),[n]=r.buildHtml(),(i=i=t.__useShadowRoot__?t.shadowRoot=t.createShadowRoot():t).innerHTML=n,this.wireOutlets(t,i)}static wireOutlets(t,e){var n,i,r,o;for(i=0,r=(o=e.querySelectorAll("[outlet]")).length;i<r;i++)t[(n=o[i]).getAttribute("outlet")]=n,n.removeAttribute("outlet")}}return e.Babel=t,e}.call(this),s=function(){class t{constructor(){this.currentBuilder=new e}subview(t,e){return this.currentBuilder.subview(t,e)}text(t){return this.currentBuilder.text(t)}tag(t,...e){return this.currentBuilder.tag(t,...e)}raw(t){return this.currentBuilder.raw(t)}buildHtml(){return this.currentBuilder.buildHtml()}}return o.forEach((function(e){return t.prototype[e]=function(...t){return this.currentBuilder.tag(e,...t)}})),t}.call(this),e=class{constructor(){this.document=[],this.postProcessingSteps=[]}buildHtml(){return[this.document.join(""),this.postProcessingSteps]}tag(t,...e){var n;if(n=this.extractOptions(e),this.openTag(t,n.attributes),!i.hasOwnProperty(t))return"function"==typeof n.content&&n.content(),n.text&&this.text(n.text),this.closeTag(t);if(null!=n.text||null!=n.content)throw new Error(`Self-closing tag ${t} cannot have text or content`)}openTag(t,e){var n,i,r,o;return 0===this.document.length&&null==e&&(e={}),r=(i=function(){var t;for(n in t=[],e)o=e[n],t.push(`${n}="${o}"`);return t}()).length?" "+i.join(" "):"",this.document.push(`<${t}${r}>`)}closeTag(t){return this.document.push(`</${t}>`)}text(t){var e;return e=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.document.push(e)}raw(t){return this.document.push(t)}subview(t,e){var n;return n="subview-"+ ++idCounter,this.tag("div",{id:n}),this.postProcessingSteps.push((function(i){return i[t]=e,e.parentView=i,i.find(`div#${n}`).replaceWith(e)}))}extractOptions(t){var e,n,i,r;for(r={},n=0,i=t.length;n<i;n++)switch(typeof(e=t[n])){case"function":r.content=e;break;case"string":case"number":r.text=e.toString();break;default:r.attributes=e}return r}}}.call(ct={})),ct}(function(){p={requirePackages:function(...t){return new Promise((function(e,n){var i,r,o,s;return o=[],i=[],r=t.length,s=function(){if(0===--r)return i.length>0?n(i):e(o)},t.forEach((function(t,e){var n,r;return n=function(t){return i[e]=t,s()},null!=(r=atom.packages.activatePackage(t).then((function(t){return o[e]=t.mainModule,s()}))).fail?r.fail(n):null!=r.catch?r.catch(n):void 0}))}))},registerOrUpdateElement:(G||(G=!0,Z()),K),Ancestors:nt(),AncestorsMethods:nt(),DisposableEvents:ot(),EventsDelegation:ut(),SpacePenDSL:ht()}}).call(p);var dt,ft;(ft={}).forEach=function(t,e){for(var n=0;n<t.length;n++){var i=e(t[n]);if(i)return i}};var pt,gt=ft.forEach;pt=function(t){var e=t.stateHandler.getState;return{isDetectable:function(t){var n=e(t);return n&&!!n.isDetectable},markAsDetectable:function(t){e(t).isDetectable=!0},isBusy:function(t){return!!e(t).busy},markBusy:function(t,n){e(t).busy=!!n}}};var mt;mt=function(t){var e={};function n(n){var i=t.get(n);return void 0===i?[]:e[i]||[]}return{get:n,add:function(n,i){var r=t.get(n);e[r]||(e[r]=[]),e[r].push(i)},removeListener:function(t,e){for(var i=n(t),r=0,o=i.length;r<o;++r)if(i[r]===e){i.splice(r,1);break}},removeAllListeners:function(t){var e=n(t);e&&(e.length=0)}}};var vt;vt=function(){var t=1;return{generate:function(){return t++}}};var yt;yt=function(t){var e=t.idGenerator,n=t.stateHandler.getState;return{get:function(t){var e=n(t);return e&&void 0!==e.id?e.id:null},set:function(t){var i=n(t);if(!i)throw new Error("setId required the element to have a resize detection state.");var r=e.generate();return i.id=r,r}}};var bt;bt=function(t){function e(){}var n={log:e,warn:e,error:e};if(!t&&window.console){var i=function(t,e){t[e]=function(){var t=console[e];if(t.apply)t.apply(console,arguments);else for(var n=0;n<arguments.length;n++)t(arguments[n])}};i(n,"log"),i(n,"warn"),i(n,"error")}return n};var St={},wt=St={};wt.isIE=function(t){return(-1!==(e=navigator.userAgent.toLowerCase()).indexOf("msie")||-1!==e.indexOf("trident")||-1!==e.indexOf(" edge/"))&&(!t||t===function(){var t=3,e=document.createElement("div"),n=e.getElementsByTagName("i");do{e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e"}while(n[0]);return t>4?t:undefined}());var e},wt.isLegacyOpera=function(){return!!window.opera};var xt,Ct={};function Et(){var t={},e=0,n=0,i=0;return{add:function(r,o){o||(o=r,r=0),r>n?n=r:r<i&&(i=r),t[r]||(t[r]=[]),t[r].push(o),e++},process:function(){for(var e=i;e<=n;e++)for(var r=t[e],o=0;o<r.length;o++){(0,r[o])()}},size:function(){return e}}}(Ct={}).getOption=function(t,e,n){var i=t[e];if(null==i&&void 0!==n)return n;return i},xt=function(t){var e=(t=t||{}).reporter,n=Ct.getOption(t,"async",!0),i=Ct.getOption(t,"auto",!0);i&&!n&&(e&&e.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var r,o=Et(),s=!1;function a(){for(s=!0;o.size();){var t=o;o=Et(),t.process()}s=!1}function u(){var t;t=a,r=setTimeout(t,0)}return{add:function(t,e){!s&&i&&n&&0===o.size()&&u(),o.add(t,e)},force:function(t){s||(void 0===t&&(t=n),r&&(clearTimeout(r),r=null),t?u():a())}}};var Tt={};function kt(t){return t._erd}Tt={initState:function(t){return t._erd={},kt(t)},getState:kt,cleanState:function(t){delete t._erd}};var Dt;Dt=function(t){var e=(t=t||{}).reporter,n=t.batchProcessor,i=t.stateHandler.getState;if(!e)throw new Error("Missing required dependency: reporter.");function r(e){var n=t.important?" !important; ":"; ";return(e.join(n)+n).trim()}function o(t){return i(t).object}return{makeDetectable:function(t,o,s){s||(s=o,o=t,t=null),(t=t||{}).debug,St.isIE(8)?s(o):function(o,s){var a=r(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),u=!1,c=window.getComputedStyle(o),l=o.offsetWidth,h=o.offsetHeight;function d(){function n(){if("static"===c.position){o.style.setProperty("position","relative",t.important?"important":"");var n=function(e,n,i,r){var o=i[r];"auto"!==o&&"0"!==function(t){return t.replace(/[^-\d\.]/g,"")}(o)&&(e.warn("An element that is positioned static has style."+r+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",n),n.style.setProperty(r,"0",t.important?"important":""))};n(e,o,c,"top"),n(e,o,c,"right"),n(e,o,c,"bottom"),n(e,o,c,"left")}}""!==c.position&&(n(),u=!0);var r=document.createElement("object");r.style.cssText=a,r.tabIndex=-1,r.type="text/html",r.setAttribute("aria-hidden","true"),r.onload=function(){u||n(),function t(e,n){if(!e.contentDocument){var r=i(e);return r.checkForObjectDocumentTimeoutId&&window.clearTimeout(r.checkForObjectDocumentTimeoutId),void(r.checkForObjectDocumentTimeoutId=setTimeout((function(){r.checkForObjectDocumentTimeoutId=0,t(e,n)}),100))}n(e.contentDocument)}(this,(function(t){s(o)}))},St.isIE()||(r.data="about:blank"),i(o)&&(o.appendChild(r),i(o).object=r,St.isIE()&&(r.data="about:blank"))}i(o).startSize={width:l,height:h},n?n.add(d):d()}(o,s)},addListener:function(t,e){function n(){e(t)}if(St.isIE(8))i(t).object={proxy:n},t.attachEvent("onresize",n);else{var r=o(t);if(!r)throw new Error("Element is not detectable by this strategy.");r.contentDocument.defaultView.addEventListener("resize",n)}},uninstall:function(t){if(i(t)){var e=o(t);e&&(St.isIE(8)?t.detachEvent("onresize",e.proxy):t.removeChild(e),i(t).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(t).checkForObjectDocumentTimeoutId),delete i(t).object)}}}};var Mt,Lt=ft.forEach;function At(t){return Array.isArray(t)||void 0!==t.length}function Rt(t){if(Array.isArray(t))return t;var e=[];return gt(t,(function(t){e.push(t)})),e}function Ot(t){return t&&1===t.nodeType}function _t(t,e,n){var i=t[e];return null==i&&void 0!==n?n:i}Mt=function(t){var e=(t=t||{}).reporter,n=t.batchProcessor,i=t.stateHandler.getState,r=(t.stateHandler.hasState,t.idHandler);if(!n)throw new Error("Missing required dependency: batchProcessor");if(!e)throw new Error("Missing required dependency: reporter.");var o=function(){var t=500,e=500,n=document.createElement("div");n.style.cssText=u(["position: absolute","width: 1000px","height: 1000px","visibility: hidden","margin: 0","padding: 0"]);var i=document.createElement("div");i.style.cssText=u(["position: absolute","width: 500px","height: 500px","overflow: scroll","visibility: none","top: -1500px","left: -1500px","visibility: hidden","margin: 0","padding: 0"]),i.appendChild(n),document.body.insertBefore(i,document.body.firstChild);var r=t-i.clientWidth,o=e-i.clientHeight;return document.body.removeChild(i),{width:r,height:o}}(),s="erd_scroll_detection_container";function a(t){!function(t,e,n){function i(n,i){i=i||function(e){t.head.appendChild(e)};var r=t.createElement("style");return r.innerHTML=n,r.id=e,i(r),r}if(!t.getElementById(e)){var r=n+"_animation",o=n+"_animation_active",s="/* Created by the element-resize-detector library. */\n";s+="."+n+" > div::-webkit-scrollbar { "+u(["display: none"])+" }\n\n",s+="."+o+" { "+u(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+r,"animation-name: "+r])+" }\n",s+="@-webkit-keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",i(s+="@keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}(t,"erd_scroll_detection_scrollbar_style",s)}function u(e){var n=t.important?" !important; ":"; ";return(e.join(n)+n).trim()}function c(t,n,i){if(t.addEventListener)t.addEventListener(n,i);else{if(!t.attachEvent)return e.error("[scroll] Don't know how to add event listeners.");t.attachEvent("on"+n,i)}}function l(t,n,i){if(t.removeEventListener)t.removeEventListener(n,i);else{if(!t.detachEvent)return e.error("[scroll] Don't know how to remove event listeners.");t.detachEvent("on"+n,i)}}function h(t){return i(t).container.childNodes[0].childNodes[0].childNodes[0]}function d(t){return i(t).container.childNodes[0].childNodes[0].childNodes[1]}return a(window.document),{makeDetectable:function(t,a,l){function f(){if(t.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(r.get(a),"Scroll: "),e.log.apply)e.log.apply(null,n);else for(var i=0;i<n.length;i++)e.log(n[i])}}function p(t){var e=i(t).container.childNodes[0],n=window.getComputedStyle(e);return!n.width||-1===n.width.indexOf("px")}function g(){var t=window.getComputedStyle(a),e={};return e.position=t.position,e.width=a.offsetWidth,e.height=a.offsetHeight,e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left,e.widthCSS=t.width,e.heightCSS=t.height,e}function m(){if(f("storeStyle invoked."),i(a)){var t=g();i(a).style=t}else f("Aborting because element has been uninstalled")}function v(t,e,n){i(t).lastWidth=e,i(t).lastHeight=n}function y(){return 2*o.width+1}function b(){return 2*o.height+1}function S(t){return t+10+y()}function w(t){return t+10+b()}function x(t,e,n){var i=h(t),r=d(t),o=S(e),s=w(n),a=function(t){return 2*t+y()}(e),u=function(t){return 2*t+b()}(n);i.scrollLeft=o,i.scrollTop=s,r.scrollLeft=a,r.scrollTop=u}function C(){var t=i(a).container;if(!t){(t=document.createElement("div")).className=s,t.style.cssText=u(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(a).container=t,function(t){t.className+=" "+s+"_animation_active"}(t),a.appendChild(t);var e=function(){i(a).onRendered&&i(a).onRendered()};c(t,"animationstart",e),i(a).onAnimationStart=e}return t}function E(){if(f("Injecting elements"),i(a)){!function(){var n=i(a).style;if("static"===n.position){a.style.setProperty("position","relative",t.important?"important":"");var r=function(t,e,n,i){var r=n[i];"auto"!==r&&"0"!==function(t){return t.replace(/[^-\d\.]/g,"")}(r)&&(t.warn("An element that is positioned static has style."+i+"="+r+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+i+" will be set to 0. Element: ",e),e.style[i]=0)};r(e,a,n,"top"),r(e,a,n,"right"),r(e,a,n,"bottom"),r(e,a,n,"left")}}();var n=i(a).container;n||(n=C());var r,l,h,d,p=o.width,g=o.height,m=u(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),v=u(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(["left: "+(r=(r=-(1+p))?r+"px":"0"),"top: "+(l=(l=-(1+g))?l+"px":"0"),"right: "+(d=(d=-p)?d+"px":"0"),"bottom: "+(h=(h=-g)?h+"px":"0")])),y=u(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),b=u(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),S=u(["position: absolute","left: 0","top: 0"]),w=u(["position: absolute","width: 200%","height: 200%"]),x=document.createElement("div"),E=document.createElement("div"),T=document.createElement("div"),k=document.createElement("div"),D=document.createElement("div"),M=document.createElement("div");x.dir="ltr",x.style.cssText=m,x.className=s,E.className=s,E.style.cssText=v,T.style.cssText=y,k.style.cssText=S,D.style.cssText=b,M.style.cssText=w,T.appendChild(k),D.appendChild(M),E.appendChild(T),E.appendChild(D),x.appendChild(E),n.appendChild(x),c(T,"scroll",L),c(D,"scroll",A),i(a).onExpandScroll=L,i(a).onShrinkScroll=A}else f("Aborting because element has been uninstalled");function L(){i(a).onExpand&&i(a).onExpand()}function A(){i(a).onShrink&&i(a).onShrink()}}function T(){function o(e,n,i){var r=function(t){return h(t).childNodes[0]}(e),o=S(n),s=w(i);r.style.setProperty("width",o+"px",t.important?"important":""),r.style.setProperty("height",s+"px",t.important?"important":"")}function s(s){var c=a.offsetWidth,l=a.offsetHeight,h=c!==i(a).lastWidth||l!==i(a).lastHeight;f("Storing current size",c,l),v(a,c,l),n.add(0,(function(){if(h)if(i(a))if(u()){if(t.debug){var n=a.offsetWidth,s=a.offsetHeight;n===c&&s===l||e.warn(r.get(a),"Scroll: Size changed before updating detector elements.")}o(a,c,l)}else f("Aborting because element container has not been initialized");else f("Aborting because element has been uninstalled")})),n.add(1,(function(){i(a)?u()?x(a,c,l):f("Aborting because element container has not been initialized"):f("Aborting because element has been uninstalled")})),h&&s&&n.add(2,(function(){i(a)?u()?s():f("Aborting because element container has not been initialized"):f("Aborting because element has been uninstalled")}))}function u(){return!!i(a).container}function c(){f("notifyListenersIfNeeded invoked");var t=i(a);return void 0===i(a).lastNotifiedWidth&&t.lastWidth===t.startSize.width&&t.lastHeight===t.startSize.height?f("Not notifying: Size is the same as the start size, and there has been no notification yet."):t.lastWidth===t.lastNotifiedWidth&&t.lastHeight===t.lastNotifiedHeight?f("Not notifying: Size already notified"):(f("Current size not notified, notifying..."),t.lastNotifiedWidth=t.lastWidth,t.lastNotifiedHeight=t.lastHeight,void Lt(i(a).listeners,(function(t){t(a)})))}function l(){f("Scroll detected."),p(a)?f("Scroll event fired while unrendered. Ignoring..."):s(c)}if(f("registerListenersAndPositionElements invoked."),i(a)){i(a).onRendered=function(){if(f("startanimation triggered."),p(a))f("Ignoring since element is still unrendered...");else{f("Element rendered.");var t=h(a),e=d(a);0!==t.scrollLeft&&0!==t.scrollTop&&0!==e.scrollLeft&&0!==e.scrollTop||(f("Scrollbars out of sync. Updating detector elements..."),s(c))}},i(a).onExpand=l,i(a).onShrink=l;var g=i(a).style;o(a,g.width,g.height)}else f("Aborting because element has been uninstalled")}function k(){if(f("finalizeDomMutation invoked."),i(a)){var t=i(a).style;v(a,t.width,t.height),x(a,t.width,t.height)}else f("Aborting because element has been uninstalled")}function D(){l(a)}function M(){var t;f("Installing..."),i(a).listeners=[],t=g(),i(a).startSize={width:t.width,height:t.height},f("Element start size",i(a).startSize),n.add(0,m),n.add(1,E),n.add(2,T),n.add(3,k),n.add(4,D)}l||(l=a,a=t,t=null),t=t||{},f("Making detectable..."),!function(t){return!function(t){return t===t.ownerDocument.body||t.ownerDocument.body.contains(t)}(t)||null===window.getComputedStyle(t)}(a)?M():(f("Element is detached"),C(),f("Waiting until element is attached..."),i(a).onRendered=function(){f("Element is now attached"),M()})},addListener:function(t,e){if(!i(t).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");i(t).listeners.push(e)},uninstall:function(t){var e=i(t);e&&(e.onExpandScroll&&l(h(t),"scroll",e.onExpandScroll),e.onShrinkScroll&&l(d(t),"scroll",e.onShrinkScroll),e.onAnimationStart&&l(e.container,"animationstart",e.onAnimationStart),e.container&&t.removeChild(e.container))},initDocument:a}},dt=function(t){var e;if((t=t||{}).idHandler)e={get:function(e){return t.idHandler.get(e,!0)},set:t.idHandler.set};else{var n=vt(),i=yt({idGenerator:n,stateHandler:Tt});e=i}var r=t.reporter;r||(r=bt(!1===r));var o=_t(t,"batchProcessor",xt({reporter:r})),s={};s.callOnAdd=!!_t(t,"callOnAdd",!0),s.debug=!!_t(t,"debug",!1);var a,u=mt(e),c=pt({stateHandler:Tt}),l=_t(t,"strategy","object"),h=_t(t,"important",!1),d={reporter:r,batchProcessor:o,stateHandler:Tt,idHandler:e,important:h};if("scroll"===l&&(St.isLegacyOpera()?(r.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),l="object"):St.isIE(9)&&(r.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),l="object")),"scroll"===l)a=Mt(d);else{if("object"!==l)throw new Error("Invalid strategy name: "+l);a=Dt(d)}var f={};return{listenTo:function(t,n,i){function o(t){var e=u.get(t);gt(e,(function(e){e(t)}))}function l(t,e,n){u.add(e,n),t&&n(e)}if(i||(i=n,n=t,t={}),!n)throw new Error("At least one element required.");if(!i)throw new Error("Listener required.");if(Ot(n))n=[n];else{if(!At(n))return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");n=Rt(n)}var d=0,p=_t(t,"callOnAdd",s.callOnAdd),g=_t(t,"onReady",(function(){})),m=_t(t,"debug",s.debug);gt(n,(function(t){Tt.getState(t)||(Tt.initState(t),e.set(t));var s=e.get(t);if(m&&r.log("Attaching listener to element",s,t),!c.isDetectable(t))return m&&r.log(s,"Not detectable."),c.isBusy(t)?(m&&r.log(s,"System busy making it detectable"),l(p,t,i),f[s]=f[s]||[],void f[s].push((function(){++d===n.length&&g()}))):(m&&r.log(s,"Making detectable..."),c.markBusy(t,!0),a.makeDetectable({debug:m,important:h},t,(function(t){if(m&&r.log(s,"onElementDetectable"),Tt.getState(t)){c.markAsDetectable(t),c.markBusy(t,!1),a.addListener(t,o),l(p,t,i);var e=Tt.getState(t);if(e&&e.startSize){var u=t.offsetWidth,h=t.offsetHeight;e.startSize.width===u&&e.startSize.height===h||o(t)}f[s]&&gt(f[s],(function(t){t()}))}else m&&r.log(s,"Element uninstalled before being detectable.");delete f[s],++d===n.length&&g()})));m&&r.log(s,"Already detecable, adding listener."),l(p,t,i),d++})),d===n.length&&g()},removeListener:u.removeListener,removeAllListeners:u.removeAllListeners,uninstall:function(t){if(!t)return r.error("At least one element is required.");if(Ot(t))t=[t];else{if(!At(t))return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t=Rt(t)}gt(t,(function(t){u.removeAllListeners(t),a.uninstall(t),Tt.cleanState(t)}))},initDocument:function(t){a.initDocument&&a.initDocument(t)}}},J();var Pt=s(J());class It extends Pt{retrieveStyleFromDom(t,e,n=!0){this.ensureCache();const i=t.join(" ");let r=this.constructor.domStylesCache[i];if(n&&null!=(r?r[e]:void 0))return r[e];this.ensureDummyNodeExistence(),r||(this.constructor.domStylesCache[i]=r={});let o=this.dummyNode;for(let e=0,n=t.length;e<n;e++){const n=t[e],i=document.createElement("span");i.className=n.replace(/\.+/g," "),null!=o&&o.appendChild(i),o=i}const s=window.getComputedStyle(o),a=s.getPropertyValue("-webkit-filter");let u=s.getPropertyValue(e);return a.indexOf("hue-rotate")>-1&&(u=this.rotateHue(u,a)),""!==u&&(r[e]=u),this.dummyNode.innerHTML="",u}ensureDummyNodeExistence(){null==this.dummyNode&&(this.dummyNode=document.createElement("span"),this.dummyNode.style.visibility="hidden"),this.getTextEditorElement().appendChild(this.dummyNode)}ensureCache(){this.constructor.domStylesCache||(this.constructor.domStylesCache={})}invalidateDOMStylesCache(){this.constructor.domStylesCache={}}invalidateIfFirstTokenization(){this.constructor.hasTokenizedOnce||(this.invalidateDOMStylesCache(),this.constructor.hasTokenizedOnce=!0)}rotateHue(t,e){const n=t.match(/rgb(a?)\((\d+), (\d+), (\d+)(, (\d+(\.\d+)?))?\)/);let[,,i,r,o,,s]=n,[,a]=e.match(/hue-rotate\((\d+)deg\)/);return[i,r,o,s,a]=[i,r,o,s,a].map(Number),[i,r,o]=function(t,e,n,i){const r=[1,0,0,0,1,0,0,0,1],o=.2126,s=.7152,a=.0722,u=.143,c=.14,l=.283,h=Math.cos(i*Math.PI/180),d=Math.sin(i*Math.PI/180);return r[0]=o+(1-o)*h-o*d,r[1]=s-s*h-s*d,r[2]=a-a*h+(1-a)*d,r[3]=o-o*h+u*d,r[4]=s+(1-s)*h+c*d,r[5]=a-a*h-l*d,r[6]=o-o*h-(1-o)*d,r[7]=s-s*h+s*d,r[8]=a+(1-a)*h+a*d,[f(r[0]*t+r[1]*e+r[2]*n),f(r[3]*t+r[4]*e+r[5]*n),f(r[6]*t+r[7]*e+r[8]*n)];function f(t){return Math.ceil(Math.max(0,Math.min(255,t)))}}(i,r,o,a),isNaN(s)?`rgb(${i}, ${r}, ${o})`:`rgba(${i}, ${r}, ${o}, ${s})`}}var Ht,Nt,Ft,jt,Wt,Bt,qt,zt,Ut,Vt,$t,Qt,Kt,Gt,Zt,Yt,Xt,Jt,te,ee,ne={},ie=!1;function re(){return ie||(ie=!0,Nt="1.11.0",u(Ht={},"VERSION",(function(){return Nt})),Ft="object"==typeof self&&self.self===self&&self||"object"==typeof h&&h.global===h&&h||Function("return this")()||{},u(Ht,"root",(function(){return Ft})),jt=Array.prototype,Wt=Object.prototype,u(Ht,"ObjProto",(function(){return Wt})),u(Ht,"ArrayProto",(function(){return jt})),Bt="undefined"!=typeof Symbol?Symbol.prototype:null,u(Ht,"SymbolProto",(function(){return Bt})),qt=jt.push,zt=jt.slice,Ut=Wt.toString,Vt=Wt.hasOwnProperty,u(Ht,"hasOwnProperty",(function(){return Vt})),u(Ht,"toString",(function(){return Ut})),u(Ht,"slice",(function(){return zt})),u(Ht,"push",(function(){return qt})),$t="undefined"!=typeof ArrayBuffer,u(Ht,"supportsArrayBuffer",(function(){return $t})),Qt=Array.isArray,Kt=Object.keys,Gt=Object.create,Zt=$t&&ArrayBuffer.isView,u(Ht,"nativeIsView",(function(){return Zt})),u(Ht,"nativeCreate",(function(){return Gt})),u(Ht,"nativeKeys",(function(){return Kt})),u(Ht,"nativeIsArray",(function(){return Qt})),Yt=isNaN,Xt=isFinite,u(Ht,"_isFinite",(function(){return Xt})),u(Ht,"_isNaN",(function(){return Yt})),Jt=!{toString:null}.propertyIsEnumerable("toString"),u(Ht,"hasEnumBug",(function(){return Jt})),te=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],u(Ht,"nonEnumerableProps",(function(){return te})),ee=Math.pow(2,53)-1,u(Ht,"MAX_ARRAY_INDEX",(function(){return ee}))),Ht}var oe,se=!1;function ae(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var o=Array(e+1);for(r=0;r<e;r++)o[r]=arguments[r];return o[e]=i,t.apply(this,o)}}function ue(){return se||(se=!0,u(oe={},"default",(function(){return ae}))),oe}var ce,le=!1;function he(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function de(){return le||(le=!0,u(ce={},"default",(function(){return he}))),ce}var fe,pe=!1;function ge(t){return null===t}function me(){return pe||(pe=!0,u(fe={},"default",(function(){return ge}))),fe}var ve,ye=!1;function be(t){return void 0===t}function Se(){return ye||(ye=!0,u(ve={},"default",(function(){return be}))),ve}var we,xe=!1;function Ce(t){return!0===t||!1===t||"[object Boolean]"===Ut.call(t)}function Ee(){return xe||(xe=!0,we={},re(),u(we,"default",(function(){return Ce}))),we}var Te,ke=!1;function De(t){return!(!t||1!==t.nodeType)}function Me(){return ke||(ke=!0,u(Te={},"default",(function(){return De}))),Te}var Le,Ae=!1;function Re(t){return function(e){return Ut.call(e)==="[object "+t+"]"}}function Oe(){return Ae||(Ae=!0,Le={},re(),u(Le,"default",(function(){return Re}))),Le}var _e,Pe,Ie=!1;function He(){return Ie||(Ie=!0,_e={},Oe(),Pe=Re("String"),u(_e,"default",(function(){return Pe}))),_e}var Ne,Fe,je=!1;function We(){return je||(je=!0,Ne={},Oe(),Fe=Re("Number"),u(Ne,"default",(function(){return Fe}))),Ne}var Be,qe,ze=!1;function Ue(){return ze||(ze=!0,Be={},Oe(),qe=Re("Date"),u(Be,"default",(function(){return qe}))),Be}var Ve,$e,Qe=!1;function Ke(){return Qe||(Qe=!0,Ve={},Oe(),$e=Re("RegExp"),u(Ve,"default",(function(){return $e}))),Ve}var Ge,Ze,Ye=!1;function Xe(){return Ye||(Ye=!0,Ge={},Oe(),Ze=Re("Error"),u(Ge,"default",(function(){return Ze}))),Ge}var Je,tn,en=!1;function nn(){return en||(en=!0,Je={},Oe(),tn=Re("Symbol"),u(Je,"default",(function(){return tn}))),Je}var rn,on,sn=!1;function an(){return sn||(sn=!0,rn={},Oe(),on=Re("Map"),u(rn,"default",(function(){return on}))),rn}var un,cn,ln=!1;function hn(){return ln||(ln=!0,un={},Oe(),cn=Re("WeakMap"),u(un,"default",(function(){return cn}))),un}var dn,fn,pn=!1;function gn(){return pn||(pn=!0,dn={},Oe(),fn=Re("Set"),u(dn,"default",(function(){return fn}))),dn}var mn,vn,yn=!1;function bn(){return yn||(yn=!0,mn={},Oe(),vn=Re("WeakSet"),u(mn,"default",(function(){return vn}))),mn}var Sn,wn,xn=!1;function Cn(){return xn||(xn=!0,Sn={},Oe(),wn=Re("ArrayBuffer"),u(Sn,"default",(function(){return wn}))),Sn}var En,Tn,kn=!1;function Dn(){return kn||(kn=!0,En={},Oe(),Tn=Re("DataView"),u(En,"default",(function(){return Tn}))),En}var Mn,Ln,An=!1;function Rn(){return An||(An=!0,Mn={},re(),Oe(),Ln=Qt||Re("Array"),u(Mn,"default",(function(){return Ln}))),Mn}var On,_n,Pn,In,Hn=!1;function Nn(){return Hn||(Hn=!0,On={},Oe(),re(),_n=Re("Function"),Pn=Ft.document&&Ft.document.childNodes,"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof Pn&&(_n=function(t){return"function"==typeof t||!1}),In=_n,u(On,"default",(function(){return In}))),On}var Fn,jn=!1;function Wn(t,e){return null!=t&&Vt.call(t,e)}function Bn(){return jn||(jn=!0,Fn={},re(),u(Fn,"default",(function(){return Wn}))),Fn}var qn,zn,Un,Vn=!1;function $n(){return Vn||(Vn=!0,qn={},Oe(),Bn(),zn=Re("Arguments"),function(){zn(arguments)||(zn=function(t){return Wn(t,"callee")})}(),Un=zn,u(qn,"default",(function(){return Un}))),qn}var Qn,Kn=!1;function Gn(t){return!tn(t)&&Xt(t)&&!isNaN(parseFloat(t))}function Zn(){return Kn||(Kn=!0,Qn={},re(),nn(),u(Qn,"default",(function(){return Gn}))),Qn}var Yn,Xn=!1;function Jn(t){return Fe(t)&&Yt(t)}function ti(){return Xn||(Xn=!0,Yn={},re(),We(),u(Yn,"default",(function(){return Jn}))),Yn}var ei,ni=!1;function ii(t){return function(){return t}}function ri(){return ni||(ni=!0,u(ei={},"default",(function(){return ii}))),ei}var oi,si=!1;function ai(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=ee}}function ui(){return si||(si=!0,oi={},re(),u(oi,"default",(function(){return ai}))),oi}var ci,li=!1;function hi(t){return function(e){return null==e?void 0:e[t]}}function di(){return li||(li=!0,u(ci={},"default",(function(){return hi}))),ci}var fi,pi,gi=!1;function mi(){return gi||(gi=!0,fi={},di(),pi=hi("byteLength"),u(fi,"default",(function(){return pi}))),fi}var vi,yi,bi=!1;function Si(){return bi||(bi=!0,vi={},ui(),mi(),yi=ai(pi),u(vi,"default",(function(){return yi}))),vi}var wi,xi,Ci,Ei=!1;function Ti(t){return Zt?Zt(t)&&!Tn(t):yi(t)&&xi.test(Ut.call(t))}function ki(){return Ei||(Ei=!0,wi={},re(),Dn(),ri(),Si(),xi=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,Ci=$t?Ti:ii(!1),u(wi,"default",(function(){return Ci}))),wi}var Di,Mi,Li=!1;function Ai(){return Li||(Li=!0,Di={},di(),Mi=hi("length"),u(Di,"default",(function(){return Mi}))),Di}var Ri,Oi,_i=!1;function Pi(){return _i||(_i=!0,Ri={},ui(),Ai(),Oi=ai(Mi),u(Ri,"default",(function(){return Oi}))),Ri}var Ii,Hi=!1;function Ni(t,e){e=function(t){for(var e={},n=t.length,i=0;i<n;++i)e[t[i]]=!0;return{contains:function(t){return e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=te.length,i=t.constructor,r=In(i)&&i.prototype||Wt,o="constructor";for(Wn(t,o)&&!e.contains(o)&&e.push(o);n--;)(o=te[n])in t&&t[o]!==r[o]&&!e.contains(o)&&e.push(o)}function Fi(){return Hi||(Hi=!0,Ii={},re(),Nn(),Bn(),u(Ii,"default",(function(){return Ni}))),Ii}var ji,Wi=!1;function Bi(t){if(!he(t))return[];if(Kt)return Kt(t);var e=[];for(var n in t)Wn(t,n)&&e.push(n);return Jt&&Ni(t,e),e}function qi(){return Wi||(Wi=!0,ji={},de(),re(),Bn(),Fi(),u(ji,"default",(function(){return Bi}))),ji}var zi,Ui=!1;function Vi(t){return null==t||(Oi(t)&&(Ln(t)||Pe(t)||Un(t))?0===t.length:0===Bi(t).length)}function $i(){return Ui||(Ui=!0,zi={},Pi(),Rn(),He(),$n(),qi(),u(zi,"default",(function(){return Vi}))),zi}var Qi,Ki=!1;function Gi(t,e){var n=Bi(e),i=n.length;if(null==t)return!i;for(var r=Object(t),o=0;o<i;o++){var s=n[o];if(e[s]!==r[s]||!(s in r))return!1}return!0}function Zi(){return Ki||(Ki=!0,Qi={},qi(),u(Qi,"default",(function(){return Gi}))),Qi}var Yi,Xi=!1;function Ji(t){return t instanceof Ji?t:this instanceof Ji?void(this._wrapped=t):new Ji(t)}function tr(){return Xi||(Xi=!0,Yi={},re(),u(Yi,"default",(function(){return Ji})),Ji.VERSION=Nt,Ji.prototype.value=function(){return this._wrapped},Ji.prototype.valueOf=Ji.prototype.toJSON=Ji.prototype.value,Ji.prototype.toString=function(){return String(this._wrapped)}),Yi}var er,nr=!1;function ir(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var r=typeof t;return("function"===r||"object"===r||"object"==typeof e)&&rr(t,e,n,i)}function rr(t,e,n,i){t instanceof Ji&&(t=t._wrapped),e instanceof Ji&&(e=e._wrapped);var r=Ut.call(t);if(r!==Ut.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return Bt.valueOf.call(t)===Bt.valueOf.call(e);case"[object ArrayBuffer]":return rr(new DataView(t),new DataView(e),n,i);case"[object DataView]":var o=pi(t);if(o!==pi(e))return!1;for(;o--;)if(t.getUint8(o)!==e.getUint8(o))return!1;return!0}if(Ci(t))return rr(new DataView(t.buffer),new DataView(e.buffer),n,i);var s="[object Array]"===r;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,u=e.constructor;if(a!==u&&!(In(a)&&a instanceof a&&In(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}i=i||[];for(var c=(n=n||[]).length;c--;)if(n[c]===t)return i[c]===e;if(n.push(t),i.push(e),s){if((c=t.length)!==e.length)return!1;for(;c--;)if(!ir(t[c],e[c],n,i))return!1}else{var l,h=Bi(t);if(c=h.length,Bi(e).length!==c)return!1;for(;c--;)if(!Wn(e,l=h[c])||!ir(t[l],e[l],n,i))return!1}return n.pop(),i.pop(),!0}function or(t,e){return ir(t,e)}function sr(){return nr||(nr=!0,er={},tr(),re(),mi(),ki(),Nn(),qi(),Bn(),u(er,"default",(function(){return or}))),er}var ar,ur=!1;function cr(t){if(!he(t))return[];var e=[];for(var n in t)e.push(n);return Jt&&Ni(t,e),e}function lr(){return ur||(ur=!0,ar={},de(),re(),Fi(),u(ar,"default",(function(){return cr}))),ar}var hr,dr=!1;function fr(t){for(var e=Bi(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i}function pr(){return dr||(dr=!0,hr={},qi(),u(hr,"default",(function(){return fr}))),hr}var gr,mr=!1;function vr(t){for(var e=Bi(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i}function yr(){return mr||(mr=!0,gr={},qi(),u(gr,"default",(function(){return vr}))),gr}var br,Sr=!1;function wr(t){for(var e={},n=Bi(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e}function xr(){return Sr||(Sr=!0,br={},qi(),u(br,"default",(function(){return wr}))),br}var Cr,Er=!1;function Tr(t){var e=[];for(var n in t)In(t[n])&&e.push(n);return e.sort()}function kr(){return Er||(Er=!0,Cr={},Nn(),u(Cr,"default",(function(){return Tr}))),Cr}var Dr,Mr=!1;function Lr(t,e){return function(n){var i=arguments.length;if(e&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],s=t(o),a=s.length,u=0;u<a;u++){var c=s[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}}function Ar(){return Mr||(Mr=!0,u(Dr={},"default",(function(){return Lr}))),Dr}var Rr,Or,_r=!1;function Pr(){return _r||(_r=!0,Rr={},Ar(),lr(),Or=Lr(cr),u(Rr,"default",(function(){return Or}))),Rr}var Ir,Hr,Nr=!1;function Fr(){return Nr||(Nr=!0,Ir={},Ar(),qi(),Hr=Lr(Bi),u(Ir,"default",(function(){return Hr}))),Ir}var jr,Wr,Br=!1;function qr(){return Br||(Br=!0,jr={},Ar(),lr(),Wr=Lr(cr,!0),u(jr,"default",(function(){return Wr}))),jr}var zr,Ur=!1;function Vr(t){if(!he(t))return{};if(Gt)return Gt(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function $r(){return Ur||(Ur=!0,zr={},de(),re(),u(zr,"default",(function(){return Vr}))),zr}var Qr,Kr=!1;function Gr(t,e){var n=Vr(t);return e&&Hr(n,e),n}function Zr(){return Kr||(Kr=!0,Qr={},$r(),Fr(),u(Qr,"default",(function(){return Gr}))),Qr}var Yr,Xr=!1;function Jr(t){return he(t)?Ln(t)?t.slice():Or({},t):t}function to(){return Xr||(Xr=!0,Yr={},de(),Rn(),Pr(),u(Yr,"default",(function(){return Jr}))),Yr}var eo,no=!1;function io(t,e){return e(t),t}function ro(){return no||(no=!0,u(eo={},"default",(function(){return io}))),eo}var oo,so=!1;function ao(t,e){if(!Ln(e))return Wn(t,e);for(var n=e.length,i=0;i<n;i++){var r=e[i];if(null==t||!Vt.call(t,r))return!1;t=t[r]}return!!n}function uo(){return so||(so=!0,oo={},Rn(),Bn(),re(),u(oo,"default",(function(){return ao}))),oo}var co,lo=!1;function ho(t){return t}function fo(){return lo||(lo=!0,u(co={},"default",(function(){return ho}))),co}var po,go=!1;function mo(t){return t=Hr({},t),function(e){return Gi(e,t)}}function vo(){return go||(go=!0,po={},Fr(),Zi(),u(po,"default",(function(){return mo}))),po}var yo,bo=!1;function So(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0}function wo(){return bo||(bo=!0,u(yo={},"default",(function(){return So}))),yo}var xo,Co=!1;function Eo(t){return Ln(t)?function(e){return So(e,t)}:hi(t)}function To(){return Co||(Co=!0,xo={},Rn(),di(),wo(),u(xo,"default",(function(){return Eo}))),xo}var ko,Do=!1;function Mo(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}}function Lo(){return Do||(Do=!0,u(ko={},"default",(function(){return Mo}))),ko}var Ao,Ro=!1;function Oo(t,e,n){return null==t?ho:In(t)?Mo(t,e,n):he(t)&&!Ln(t)?mo(t):Eo(t)}function _o(){return Ro||(Ro=!0,Ao={},fo(),Nn(),de(),Rn(),vo(),To(),Lo(),u(Ao,"default",(function(){return Oo}))),Ao}var Po,Io=!1;function Ho(t,e){return Oo(t,e,1/0)}function No(){return Io||(Io=!0,Po={},tr(),_o(),u(Po,"default",(function(){return Ho})),Ji.iteratee=Ho),Po}var Fo,jo=!1;function Wo(t,e,n){return Ji.iteratee!==Ho?Ji.iteratee(t,e):Oo(t,e,n)}function Bo(){return jo||(jo=!0,Fo={},tr(),_o(),No(),u(Fo,"default",(function(){return Wo}))),Fo}var qo,zo=!1;function Uo(t,e,n){e=Wo(e,n);for(var i=Bi(t),r=i.length,o={},s=0;s<r;s++){var a=i[s];o[a]=e(t[a],a,t)}return o}function Vo(){return zo||(zo=!0,qo={},Bo(),qi(),u(qo,"default",(function(){return Uo}))),qo}var $o,Qo=!1;function Ko(){}function Go(){return Qo||(Qo=!0,u($o={},"default",(function(){return Ko}))),$o}var Zo,Yo=!1;function Xo(t){return null==t?function(){}:function(e){return Ln(e)?So(t,e):t[e]}}function Jo(){return Yo||(Yo=!0,Zo={},Rn(),wo(),u(Zo,"default",(function(){return Xo}))),Zo}var ts,es=!1;function ns(t,e,n){var i=Array(Math.max(0,t));e=Mo(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i}function is(){return es||(es=!0,ts={},Lo(),u(ts,"default",(function(){return ns}))),ts}var rs,os=!1;function ss(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}function as(){return os||(os=!0,u(rs={},"default",(function(){return ss}))),rs}var us,cs,ls=!1;function hs(){return ls||(ls=!0,us={},cs=Date.now||function(){return(new Date).getTime()},u(us,"default",(function(){return cs}))),us}var ds,fs=!1;function ps(t){var e=function(e){return t[e]},n="(?:"+Bi(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}}function gs(){return fs||(fs=!0,ds={},qi(),u(ds,"default",(function(){return ps}))),ds}var ms,vs,ys=!1;function bs(){return ys||(ys=!0,vs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u(ms={},"default",(function(){return vs}))),ms}var Ss,ws,xs=!1;function Cs(){return xs||(xs=!0,Ss={},gs(),bs(),ws=ps(vs),u(Ss,"default",(function(){return ws}))),Ss}var Es,Ts,ks=!1;function Ds(){return ks||(ks=!0,Es={},xr(),bs(),Ts=wr(vs),u(Es,"default",(function(){return Ts}))),Es}var Ms,Ls,As=!1;function Rs(){return As||(As=!0,Ms={},gs(),Ds(),Ls=ps(Ts),u(Ms,"default",(function(){return Ls}))),Ms}var Os,_s,Ps=!1;function Is(){return Ps||(Ps=!0,Os={},tr(),_s=Ji.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},u(Os,"default",(function(){return _s}))),Os}var Hs,Ns,Fs,js,Ws=!1;function Bs(t){return"\\"+Fs[t]}function qs(t,e,n){!e&&n&&(e=n),e=Wr({},e,Ji.templateSettings);var i,r=RegExp([(e.escape||Ns).source,(e.interpolate||Ns).source,(e.evaluate||Ns).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(r,(function(e,n,i,r,a){return s+=t.slice(o,a).replace(js,Bs),o=a+e.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),e})),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var a=function(t){return i.call(this,t,Ji)},u=e.variable||"obj";return a.source="function("+u+"){\n"+s+"}",a}function zs(){return Ws||(Ws=!0,Hs={},qr(),tr(),Is(),Ns=/(.)^/,Fs={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},js=/\\|'|\r|\n|\u2028|\u2029/g,u(Hs,"default",(function(){return qs}))),Hs}var Us,Vs=!1;function $s(t,e,n){Ln(e)||(e=[e]);var i=e.length;if(!i)return In(n)?n.call(t):n;for(var r=0;r<i;r++){var o=null==t?void 0:t[e[r]];void 0===o&&(o=n,r=i),t=In(o)?o.call(t):o}return t}function Qs(){return Vs||(Vs=!0,Us={},Rn(),Nn(),u(Us,"default",(function(){return $s}))),Us}var Ks,Gs,Zs=!1;function Ys(t){var e=++Gs+"";return t?t+e:e}function Xs(){return Zs||(Zs=!0,Gs=0,u(Ks={},"default",(function(){return Ys}))),Ks}var Js,ta=!1;function ea(t){var e=Ji(t);return e._chain=!0,e}function na(){return ta||(ta=!0,Js={},tr(),u(Js,"default",(function(){return ea}))),Js}var ia,ra=!1;function oa(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var o=Vr(t.prototype),s=t.apply(o,r);return he(s)?s:o}function sa(){return ra||(ra=!0,ia={},$r(),de(),u(ia,"default",(function(){return oa}))),ia}var aa,ua,ca=!1;function la(){return ca||(ca=!0,aa={},ue(),sa(),tr(),(ua=ae((function(t,e){var n=ua.placeholder,i=function(){for(var r=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===n?arguments[r++]:e[a];for(;r<arguments.length;)s.push(arguments[r++]);return oa(t,i,this,this,s)};return i}))).placeholder=Ji,u(aa,"default",(function(){return ua}))),aa}var ha,da,fa=!1;function pa(){return fa||(fa=!0,ha={},ue(),Nn(),sa(),da=ae((function(t,e,n){if(!In(t))throw new TypeError("Bind must be called on a function");var i=ae((function(r){return oa(t,i,e,this,n.concat(r))}));return i})),u(ha,"default",(function(){return da}))),ha}var ga,ma=!1;function va(t,e,n,i){if(i=i||[],e||0===e){if(e<=0)return i.concat(t)}else e=1/0;for(var r=i.length,o=0,s=Mi(t);o<s;o++){var a=t[o];if(Oi(a)&&(Ln(a)||Un(a)))if(e>1)va(a,e-1,n,i),r=i.length;else for(var u=0,c=a.length;u<c;)i[r++]=a[u++];else n||(i[r++]=a)}return i}function ya(){return ma||(ma=!0,ga={},Ai(),Pi(),Rn(),$n(),u(ga,"default",(function(){return va}))),ga}var ba,Sa,wa=!1;function xa(){return wa||(wa=!0,ba={},ue(),ya(),pa(),Sa=ae((function(t,e){var n=(e=va(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=da(t[i],t)}return t})),u(ba,"default",(function(){return Sa}))),ba}var Ca,Ea=!1;function Ta(t,e){var n=function(i){var r=n.cache,o=""+(e?e.apply(this,arguments):i);return Wn(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return n.cache={},n}function ka(){return Ea||(Ea=!0,Ca={},Bn(),u(Ca,"default",(function(){return Ta}))),Ca}var Da,Ma,La=!1;function Aa(){return La||(La=!0,Da={},ue(),Ma=ae((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),u(Da,"default",(function(){return Ma}))),Da}var Ra,Oa,_a=!1;function Pa(){return _a||(_a=!0,Ra={},la(),Aa(),tr(),Oa=ua(Ma,Ji,1),u(Ra,"default",(function(){return Oa}))),Ra}var Ia,Ha=!1;function Na(t,e,n){var i,r,o,s,a=0;n||(n={});var u=function(){a=!1===n.leading?0:cs(),i=null,s=t.apply(r,o),i||(r=o=null)},c=function(){var c=cs();a||!1!==n.leading||(a=c);var l=e-(c-a);return r=this,o=arguments,l<=0||l>e?(i&&(clearTimeout(i),i=null),a=c,s=t.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=setTimeout(u,l)),s};return c.cancel=function(){clearTimeout(i),a=0,i=r=o=null},c}function Fa(){return Ha||(Ha=!0,Ia={},hs(),u(Ia,"default",(function(){return Na}))),Ia}var ja,Wa=!1;function Ba(t,e,n){var i,r,o=function(e,n){i=null,n&&(r=t.apply(e,n))},s=ae((function(s){if(i&&clearTimeout(i),n){var a=!i;i=setTimeout(o,e),a&&(r=t.apply(this,s))}else i=Ma(o,e,this,s);return r}));return s.cancel=function(){clearTimeout(i),i=null},s}function qa(){return Wa||(Wa=!0,ja={},ue(),Aa(),u(ja,"default",(function(){return Ba}))),ja}var za,Ua=!1;function Va(t,e){return ua(e,t)}function $a(){return Ua||(Ua=!0,za={},la(),u(za,"default",(function(){return Va}))),za}var Qa,Ka=!1;function Ga(t){return function(){return!t.apply(this,arguments)}}function Za(){return Ka||(Ka=!0,u(Qa={},"default",(function(){return Ga}))),Qa}var Ya,Xa=!1;function Ja(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}}function tu(){return Xa||(Xa=!0,u(Ya={},"default",(function(){return Ja}))),Ya}var eu,nu=!1;function iu(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function ru(){return nu||(nu=!0,u(eu={},"default",(function(){return iu}))),eu}var ou,su=!1;function au(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}function uu(){return su||(su=!0,u(ou={},"default",(function(){return au}))),ou}var cu,lu,hu=!1;function du(){return hu||(hu=!0,cu={},la(),uu(),lu=ua(au,2),u(cu,"default",(function(){return lu}))),cu}var fu,pu=!1;function gu(t,e,n){e=Wo(e,n);for(var i,r=Bi(t),o=0,s=r.length;o<s;o++)if(e(t[i=r[o]],i,t))return i}function mu(){return pu||(pu=!0,fu={},Bo(),qi(),u(fu,"default",(function(){return gu}))),fu}var vu,yu=!1;function bu(t){return function(e,n,i){n=Wo(n,i);for(var r=Mi(e),o=t>0?0:r-1;o>=0&&o<r;o+=t)if(n(e[o],o,e))return o;return-1}}function Su(){return yu||(yu=!0,vu={},Bo(),Ai(),u(vu,"default",(function(){return bu}))),vu}var wu,xu,Cu=!1;function Eu(){return Cu||(Cu=!0,wu={},Su(),xu=bu(1),u(wu,"default",(function(){return xu}))),wu}var Tu,ku,Du=!1;function Mu(){return Du||(Du=!0,Tu={},Su(),ku=bu(-1),u(Tu,"default",(function(){return ku}))),Tu}var Lu,Au=!1;function Ru(t,e,n,i){for(var r=(n=Wo(n,i,1))(e),o=0,s=Mi(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<r?o=a+1:s=a}return o}function Ou(){return Au||(Au=!0,Lu={},Bo(),Ai(),u(Lu,"default",(function(){return Ru}))),Lu}var _u,Pu=!1;function Iu(t,e,n){return function(i,r,o){var s=0,a=Mi(i);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return i[o=n(i,r)]===r?o:-1;if(r!=r)return(o=e(zt.call(i,s,a),Jn))>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&o<a;o+=t)if(i[o]===r)return o;return-1}}function Hu(){return Pu||(Pu=!0,_u={},Ai(),re(),ti(),u(_u,"default",(function(){return Iu}))),_u}var Nu,Fu,ju=!1;function Wu(){return ju||(ju=!0,Nu={},Ou(),Eu(),Hu(),Fu=Iu(1,xu,Ru),u(Nu,"default",(function(){return Fu}))),Nu}var Bu,qu,zu=!1;function Uu(){return zu||(zu=!0,Bu={},Mu(),Hu(),qu=Iu(-1,ku),u(Bu,"default",(function(){return qu}))),Bu}var Vu,$u=!1;function Qu(t,e,n){var i=(Oi(t)?xu:gu)(t,e,n);if(void 0!==i&&-1!==i)return t[i]}function Ku(){return $u||($u=!0,Vu={},Pi(),Eu(),mu(),u(Vu,"default",(function(){return Qu}))),Vu}var Gu,Zu=!1;function Yu(t,e){return Qu(t,mo(e))}function Xu(){return Zu||(Zu=!0,Gu={},Ku(),vo(),u(Gu,"default",(function(){return Yu}))),Gu}var Ju,tc=!1;function ec(t,e,n){var i,r;if(e=Mo(e,n),Oi(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var o=Bi(t);for(i=0,r=o.length;i<r;i++)e(t[o[i]],o[i],t)}return t}function nc(){return tc||(tc=!0,Ju={},Lo(),Pi(),qi(),u(Ju,"default",(function(){return ec}))),Ju}var ic,rc=!1;function oc(t,e,n){e=Wo(e,n);for(var i=!Oi(t)&&Bi(t),r=(i||t).length,o=Array(r),s=0;s<r;s++){var a=i?i[s]:s;o[s]=e(t[a],a,t)}return o}function sc(){return rc||(rc=!0,ic={},Bo(),Pi(),qi(),u(ic,"default",(function(){return oc}))),ic}var ac,uc=!1;function cc(t){var e=function(e,n,i,r){var o=!Oi(e)&&Bi(e),s=(o||e).length,a=t>0?0:s-1;for(r||(i=e[o?o[a]:a],a+=t);a>=0&&a<s;a+=t){var u=o?o[a]:a;i=n(i,e[u],u,e)}return i};return function(t,n,i,r){var o=arguments.length>=3;return e(t,Mo(n,r,4),i,o)}}function lc(){return uc||(uc=!0,ac={},Pi(),qi(),Lo(),u(ac,"default",(function(){return cc}))),ac}var hc,dc,fc=!1;function pc(){return fc||(fc=!0,hc={},lc(),dc=cc(1),u(hc,"default",(function(){return dc}))),hc}var gc,mc,vc=!1;function yc(){return vc||(vc=!0,gc={},lc(),mc=cc(-1),u(gc,"default",(function(){return mc}))),gc}var bc,Sc=!1;function wc(t,e,n){var i=[];return e=Wo(e,n),ec(t,(function(t,n,r){e(t,n,r)&&i.push(t)})),i}function xc(){return Sc||(Sc=!0,bc={},Bo(),nc(),u(bc,"default",(function(){return wc}))),bc}var Cc,Ec=!1;function Tc(t,e,n){return wc(t,Ga(Wo(e)),n)}function kc(){return Ec||(Ec=!0,Cc={},xc(),Za(),Bo(),u(Cc,"default",(function(){return Tc}))),Cc}var Dc,Mc=!1;function Lc(t,e,n){e=Wo(e,n);for(var i=!Oi(t)&&Bi(t),r=(i||t).length,o=0;o<r;o++){var s=i?i[o]:o;if(!e(t[s],s,t))return!1}return!0}function Ac(){return Mc||(Mc=!0,Dc={},Bo(),Pi(),qi(),u(Dc,"default",(function(){return Lc}))),Dc}var Rc,Oc=!1;function _c(t,e,n){e=Wo(e,n);for(var i=!Oi(t)&&Bi(t),r=(i||t).length,o=0;o<r;o++){var s=i?i[o]:o;if(e(t[s],s,t))return!0}return!1}function Pc(){return Oc||(Oc=!0,Rc={},Bo(),Pi(),qi(),u(Rc,"default",(function(){return _c}))),Rc}var Ic,Hc=!1;function Nc(t,e,n,i){return Oi(t)||(t=fr(t)),("number"!=typeof n||i)&&(n=0),Fu(t,e,n)>=0}function Fc(){return Hc||(Hc=!0,Ic={},Pi(),pr(),Wu(),u(Ic,"default",(function(){return Nc}))),Ic}var jc,Wc,Bc=!1;function qc(){return Bc||(Bc=!0,jc={},ue(),Nn(),Rn(),sc(),wo(),Wc=ae((function(t,e,n){var i,r;return In(e)?r=e:Ln(e)&&(i=e.slice(0,-1),e=e[e.length-1]),oc(t,(function(t){var o=r;if(!o){if(i&&i.length&&(t=So(t,i)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))})),u(jc,"default",(function(){return Wc}))),jc}var zc,Uc=!1;function Vc(t,e){return oc(t,Eo(e))}function $c(){return Uc||(Uc=!0,zc={},sc(),To(),u(zc,"default",(function(){return Vc}))),zc}var Qc,Kc=!1;function Gc(t,e){return wc(t,mo(e))}function Zc(){return Kc||(Kc=!0,Qc={},xc(),vo(),u(Qc,"default",(function(){return Gc}))),Qc}var Yc,Xc=!1;function Jc(t,e,n){var i,r,o=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,u=(t=Oi(t)?t:fr(t)).length;a<u;a++)null!=(i=t[a])&&i>o&&(o=i);else e=Wo(e,n),ec(t,(function(t,n,i){((r=e(t,n,i))>s||r===-1/0&&o===-1/0)&&(o=t,s=r)}));return o}function tl(){return Xc||(Xc=!0,Yc={},Pi(),pr(),Bo(),nc(),u(Yc,"default",(function(){return Jc}))),Yc}var el,nl=!1;function il(t,e,n){var i,r,o=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,u=(t=Oi(t)?t:fr(t)).length;a<u;a++)null!=(i=t[a])&&i<o&&(o=i);else e=Wo(e,n),ec(t,(function(t,n,i){((r=e(t,n,i))<s||r===1/0&&o===1/0)&&(o=t,s=r)}));return o}function rl(){return nl||(nl=!0,el={},Pi(),pr(),Bo(),nc(),u(el,"default",(function(){return il}))),el}var ol,sl=!1;function al(t,e,n){if(null==e||n)return Oi(t)||(t=fr(t)),t[ss(t.length-1)];var i=Oi(t)?Jr(t):fr(t),r=Mi(i);e=Math.max(Math.min(e,r),0);for(var o=r-1,s=0;s<e;s++){var a=ss(s,o),u=i[s];i[s]=i[a],i[a]=u}return i.slice(0,e)}function ul(){return sl||(sl=!0,ol={},Pi(),to(),pr(),Ai(),as(),u(ol,"default",(function(){return al}))),ol}var cl,ll=!1;function hl(t){return al(t,1/0)}function dl(){return ll||(ll=!0,cl={},ul(),u(cl,"default",(function(){return hl}))),cl}var fl,pl=!1;function gl(t,e,n){var i=0;return e=Wo(e,n),Vc(oc(t,(function(t,n,r){return{value:t,index:i++,criteria:e(t,n,r)}})).sort((function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index})),"value")}function ml(){return pl||(pl=!0,fl={},Bo(),$c(),sc(),u(fl,"default",(function(){return gl}))),fl}var vl,yl=!1;function bl(t,e){return function(n,i,r){var o=e?[[],[]]:{};return i=Wo(i,r),ec(n,(function(e,r){var s=i(e,r,n);t(o,e,s)})),o}}function Sl(){return yl||(yl=!0,vl={},Bo(),nc(),u(vl,"default",(function(){return bl}))),vl}var wl,xl,Cl=!1;function El(){return Cl||(Cl=!0,wl={},Sl(),Bn(),xl=bl((function(t,e,n){Wn(t,n)?t[n].push(e):t[n]=[e]})),u(wl,"default",(function(){return xl}))),wl}var Tl,kl,Dl=!1;function Ml(){return Dl||(Dl=!0,Tl={},Sl(),kl=bl((function(t,e,n){t[n]=e})),u(Tl,"default",(function(){return kl}))),Tl}var Ll,Al,Rl=!1;function Ol(){return Rl||(Rl=!0,Ll={},Sl(),Bn(),Al=bl((function(t,e,n){Wn(t,n)?t[n]++:t[n]=1})),u(Ll,"default",(function(){return Al}))),Ll}var _l,Pl,Il=!1;function Hl(){return Il||(Il=!0,_l={},Sl(),Pl=bl((function(t,e,n){t[n?0:1].push(e)}),!0),u(_l,"default",(function(){return Pl}))),_l}var Nl,Fl,jl=!1;function Wl(t){return t?Ln(t)?zt.call(t):Pe(t)?t.match(Fl):Oi(t)?oc(t,ho):fr(t):[]}function Bl(){return jl||(jl=!0,Nl={},Rn(),re(),He(),Pi(),sc(),fo(),pr(),Fl=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g,u(Nl,"default",(function(){return Wl}))),Nl}var ql,zl=!1;function Ul(t){return null==t?0:Oi(t)?t.length:Bi(t).length}function Vl(){return zl||(zl=!0,ql={},Pi(),qi(),u(ql,"default",(function(){return Ul}))),ql}var $l,Ql=!1;function Kl(t,e,n){return e in n}function Gl(){return Ql||(Ql=!0,u($l={},"default",(function(){return Kl}))),$l}var Zl,Yl,Xl=!1;function Jl(){return Xl||(Xl=!0,Zl={},ue(),Nn(),Lo(),lr(),Gl(),ya(),Yl=ae((function(t,e){var n={},i=e[0];if(null==t)return n;In(i)?(e.length>1&&(i=Mo(i,e[1])),e=cr(t)):(i=Kl,e=va(e,!1,!1),t=Object(t));for(var r=0,o=e.length;r<o;r++){var s=e[r],a=t[s];i(a,s,t)&&(n[s]=a)}return n})),u(Zl,"default",(function(){return Yl}))),Zl}var th,eh,nh=!1;function ih(){return nh||(nh=!0,th={},ue(),Nn(),Za(),sc(),ya(),Fc(),Jl(),eh=ae((function(t,e){var n,i=e[0];return In(i)?(i=Ga(i),e.length>1&&(n=e[1])):(e=oc(va(e,!1,!1),String),i=function(t,n){return!Nc(e,n)}),Yl(t,i,n)})),u(th,"default",(function(){return eh}))),th}var rh,oh=!1;function sh(t,e,n){return zt.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function ah(){return oh||(oh=!0,rh={},re(),u(rh,"default",(function(){return sh}))),rh}var uh,ch=!1;function lh(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:sh(t,t.length-e)}function hh(){return ch||(ch=!0,uh={},ah(),u(uh,"default",(function(){return lh}))),uh}var dh,fh=!1;function ph(t,e,n){return zt.call(t,null==e||n?1:e)}function gh(){return fh||(fh=!0,dh={},re(),u(dh,"default",(function(){return ph}))),dh}var mh,vh=!1;function yh(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:ph(t,Math.max(0,t.length-e))}function bh(){return vh||(vh=!0,mh={},gh(),u(mh,"default",(function(){return yh}))),mh}var Sh,wh=!1;function xh(t){return wc(t,Boolean)}function Ch(){return wh||(wh=!0,Sh={},xc(),u(Sh,"default",(function(){return xh}))),Sh}var Eh,Th=!1;function kh(t,e){return va(t,e,!1)}function Dh(){return Th||(Th=!0,Eh={},ya(),u(Eh,"default",(function(){return kh}))),Eh}var Mh,Lh,Ah=!1;function Rh(){return Ah||(Ah=!0,Mh={},ue(),ya(),xc(),Fc(),Lh=ae((function(t,e){return e=va(e,!0,!0),wc(t,(function(t){return!Nc(e,t)}))})),u(Mh,"default",(function(){return Lh}))),Mh}var Oh,_h,Ph=!1;function Ih(){return Ph||(Ph=!0,Oh={},ue(),Rh(),_h=ae((function(t,e){return Lh(t,e)})),u(Oh,"default",(function(){return _h}))),Oh}var Hh,Nh=!1;function Fh(t,e,n,i){Ce(e)||(i=n,n=e,e=!1),null!=n&&(n=Wo(n,i));for(var r=[],o=[],s=0,a=Mi(t);s<a;s++){var u=t[s],c=n?n(u,s,t):u;e&&!n?(s&&o===c||r.push(u),o=c):n?Nc(o,c)||(o.push(c),r.push(u)):Nc(r,u)||r.push(u)}return r}function jh(){return Nh||(Nh=!0,Hh={},Ee(),Bo(),Ai(),Fc(),u(Hh,"default",(function(){return Fh}))),Hh}var Wh,Bh,qh=!1;function zh(){return qh||(qh=!0,Wh={},ue(),jh(),ya(),Bh=ae((function(t){return Fh(va(t,!0,!0))})),u(Wh,"default",(function(){return Bh}))),Wh}var Uh,Vh=!1;function $h(t){for(var e=[],n=arguments.length,i=0,r=Mi(t);i<r;i++){var o=t[i];if(!Nc(e,o)){var s;for(s=1;s<n&&Nc(arguments[s],o);s++);s===n&&e.push(o)}}return e}function Qh(){return Vh||(Vh=!0,Uh={},Ai(),Fc(),u(Uh,"default",(function(){return $h}))),Uh}var Kh,Gh=!1;function Zh(t){for(var e=t&&Jc(t,Mi).length||0,n=Array(e),i=0;i<e;i++)n[i]=Vc(t,i);return n}function Yh(){return Gh||(Gh=!0,Kh={},tl(),Ai(),$c(),u(Kh,"default",(function(){return Zh}))),Kh}var Xh,Jh,td=!1;function ed(){return td||(td=!0,Xh={},ue(),Yh(),Jh=ae(Zh),u(Xh,"default",(function(){return Jh}))),Xh}var nd,id=!1;function rd(t,e){for(var n={},i=0,r=Mi(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n}function od(){return id||(id=!0,nd={},Ai(),u(nd,"default",(function(){return rd}))),nd}var sd,ad=!1;function ud(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;o<i;o++,t+=n)r[o]=t;return r}function cd(){return ad||(ad=!0,u(sd={},"default",(function(){return ud}))),sd}var ld,hd=!1;function dd(t,e){if(null==e||e<1)return[];for(var n=[],i=0,r=t.length;i<r;)n.push(zt.call(t,i,i+=e));return n}function fd(){return hd||(hd=!0,ld={},re(),u(ld,"default",(function(){return dd}))),ld}var pd,gd=!1;function md(t,e){return t._chain?Ji(e).chain():e}function vd(){return gd||(gd=!0,pd={},tr(),u(pd,"default",(function(){return md}))),pd}var yd,bd=!1;function Sd(t){return ec(Tr(t),(function(e){var n=Ji[e]=t[e];Ji.prototype[e]=function(){var t=[this._wrapped];return qt.apply(t,arguments),md(this,n.apply(Ji,t))}})),Ji}function wd(){return bd||(bd=!0,yd={},tr(),nc(),kr(),re(),vd(),u(yd,"default",(function(){return Sd}))),yd}var xd,Cd=!1;function Ed(){return Cd||(Cd=!0,xd={},tr(),nc(),re(),vd(),ec(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=jt[t];Ji.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),md(this,n)}})),ec(["concat","join","slice"],(function(t){var e=jt[t];Ji.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),md(this,t)}})),Ji,u(xd,"default",(function(){return Ji}))),xd}var Td,kd=!1;function Dd(){return kd||(kd=!0,Td={},re(),ue(),de(),me(),Se(),Ee(),Me(),He(),We(),Ue(),Ke(),Xe(),nn(),an(),hn(),gn(),bn(),Cn(),Dn(),Rn(),Nn(),$n(),Zn(),ti(),ki(),$i(),Zi(),sr(),qi(),lr(),pr(),yr(),xr(),kr(),Pr(),Fr(),qr(),Zr(),to(),ro(),uo(),Vo(),fo(),ri(),Go(),To(),Jo(),vo(),is(),as(),hs(),Cs(),Rs(),Is(),zs(),Qs(),Xs(),na(),No(),la(),pa(),xa(),ka(),Aa(),Pa(),Fa(),qa(),$a(),Za(),tu(),ru(),uu(),du(),mu(),Eu(),Mu(),Ou(),Wu(),Uu(),Ku(),Xu(),nc(),sc(),pc(),yc(),xc(),kc(),Ac(),Pc(),Fc(),qc(),$c(),Zc(),tl(),rl(),dl(),ul(),ml(),El(),Ml(),Ol(),Hl(),Bl(),Vl(),Jl(),ih(),hh(),ah(),bh(),gh(),Ch(),Dh(),Ih(),jh(),zh(),Qh(),Rh(),Yh(),ed(),od(),cd(),fd(),wd(),Ed(),u(Td,"VERSION",(function(){return Nt})),u(Td,"restArguments",(function(){return ae})),u(Td,"isObject",(function(){return he})),u(Td,"isNull",(function(){return ge})),u(Td,"isUndefined",(function(){return be})),u(Td,"isBoolean",(function(){return Ce})),u(Td,"isElement",(function(){return De})),u(Td,"isString",(function(){return Pe})),u(Td,"isNumber",(function(){return Fe})),u(Td,"isDate",(function(){return qe})),u(Td,"isRegExp",(function(){return $e})),u(Td,"isError",(function(){return Ze})),u(Td,"isSymbol",(function(){return tn})),u(Td,"isMap",(function(){return on})),u(Td,"isWeakMap",(function(){return cn})),u(Td,"isSet",(function(){return fn})),u(Td,"isWeakSet",(function(){return vn})),u(Td,"isArrayBuffer",(function(){return wn})),u(Td,"isDataView",(function(){return Tn})),u(Td,"isArray",(function(){return Ln})),u(Td,"isFunction",(function(){return In})),u(Td,"isArguments",(function(){return Un})),u(Td,"isFinite",(function(){return Gn})),u(Td,"isNaN",(function(){return Jn})),u(Td,"isTypedArray",(function(){return Ci})),u(Td,"isEmpty",(function(){return Vi})),u(Td,"isMatch",(function(){return Gi})),u(Td,"isEqual",(function(){return or})),u(Td,"keys",(function(){return Bi})),u(Td,"allKeys",(function(){return cr})),u(Td,"values",(function(){return fr})),u(Td,"pairs",(function(){return vr})),u(Td,"invert",(function(){return wr})),u(Td,"methods",(function(){return Tr})),u(Td,"functions",(function(){return Tr})),u(Td,"extend",(function(){return Or})),u(Td,"assign",(function(){return Hr})),u(Td,"extendOwn",(function(){return Hr})),u(Td,"defaults",(function(){return Wr})),u(Td,"create",(function(){return Gr})),u(Td,"clone",(function(){return Jr})),u(Td,"tap",(function(){return io})),u(Td,"has",(function(){return ao})),u(Td,"mapObject",(function(){return Uo})),u(Td,"identity",(function(){return ho})),u(Td,"constant",(function(){return ii})),u(Td,"noop",(function(){return Ko})),u(Td,"property",(function(){return Eo})),u(Td,"propertyOf",(function(){return Xo})),u(Td,"matches",(function(){return mo})),u(Td,"matcher",(function(){return mo})),u(Td,"times",(function(){return ns})),u(Td,"random",(function(){return ss})),u(Td,"now",(function(){return cs})),u(Td,"escape",(function(){return ws})),u(Td,"unescape",(function(){return Ls})),u(Td,"templateSettings",(function(){return _s})),u(Td,"template",(function(){return qs})),u(Td,"result",(function(){return $s})),u(Td,"uniqueId",(function(){return Ys})),u(Td,"chain",(function(){return ea})),u(Td,"iteratee",(function(){return Ho})),u(Td,"partial",(function(){return ua})),u(Td,"bind",(function(){return da})),u(Td,"bindAll",(function(){return Sa})),u(Td,"memoize",(function(){return Ta})),u(Td,"delay",(function(){return Ma})),u(Td,"defer",(function(){return Oa})),u(Td,"throttle",(function(){return Na})),u(Td,"debounce",(function(){return Ba})),u(Td,"wrap",(function(){return Va})),u(Td,"negate",(function(){return Ga})),u(Td,"compose",(function(){return Ja})),u(Td,"after",(function(){return iu})),u(Td,"before",(function(){return au})),u(Td,"once",(function(){return lu})),u(Td,"findKey",(function(){return gu})),u(Td,"findIndex",(function(){return xu})),u(Td,"findLastIndex",(function(){return ku})),u(Td,"sortedIndex",(function(){return Ru})),u(Td,"indexOf",(function(){return Fu})),u(Td,"lastIndexOf",(function(){return qu})),u(Td,"detect",(function(){return Qu})),u(Td,"find",(function(){return Qu})),u(Td,"findWhere",(function(){return Yu})),u(Td,"forEach",(function(){return ec})),u(Td,"each",(function(){return ec})),u(Td,"collect",(function(){return oc})),u(Td,"map",(function(){return oc})),u(Td,"inject",(function(){return dc})),u(Td,"foldl",(function(){return dc})),u(Td,"reduce",(function(){return dc})),u(Td,"foldr",(function(){return mc})),u(Td,"reduceRight",(function(){return mc})),u(Td,"select",(function(){return wc})),u(Td,"filter",(function(){return wc})),u(Td,"reject",(function(){return Tc})),u(Td,"all",(function(){return Lc})),u(Td,"every",(function(){return Lc})),u(Td,"any",(function(){return _c})),u(Td,"some",(function(){return _c})),u(Td,"include",(function(){return Nc})),u(Td,"includes",(function(){return Nc})),u(Td,"contains",(function(){return Nc})),u(Td,"invoke",(function(){return Wc})),u(Td,"pluck",(function(){return Vc})),u(Td,"where",(function(){return Gc})),u(Td,"max",(function(){return Jc})),u(Td,"min",(function(){return il})),u(Td,"shuffle",(function(){return hl})),u(Td,"sample",(function(){return al})),u(Td,"sortBy",(function(){return gl})),u(Td,"groupBy",(function(){return xl})),u(Td,"indexBy",(function(){return kl})),u(Td,"countBy",(function(){return Al})),u(Td,"partition",(function(){return Pl})),u(Td,"toArray",(function(){return Wl})),u(Td,"size",(function(){return Ul})),u(Td,"pick",(function(){return Yl})),u(Td,"omit",(function(){return eh})),u(Td,"take",(function(){return lh})),u(Td,"head",(function(){return lh})),u(Td,"first",(function(){return lh})),u(Td,"initial",(function(){return sh})),u(Td,"last",(function(){return yh})),u(Td,"drop",(function(){return ph})),u(Td,"tail",(function(){return ph})),u(Td,"rest",(function(){return ph})),u(Td,"compact",(function(){return xh})),u(Td,"flatten",(function(){return kh})),u(Td,"without",(function(){return _h})),u(Td,"unique",(function(){return Fh})),u(Td,"uniq",(function(){return Fh})),u(Td,"union",(function(){return Bh})),u(Td,"intersection",(function(){return $h})),u(Td,"difference",(function(){return Lh})),u(Td,"transpose",(function(){return Zh})),u(Td,"unzip",(function(){return Zh})),u(Td,"zip",(function(){return Jh})),u(Td,"object",(function(){return rd})),u(Td,"range",(function(){return ud})),u(Td,"chunk",(function(){return dd})),u(Td,"mixin",(function(){return Sd})),u(Td,"default",(function(){return Ji}))),Td}var Md,Ld,Ad=!1;function Rd(){return Ad||(Ad=!0,Md={},Dd(),Dd(),(Ld=Sd(Td))._=Ld,u(Md,"default",(function(){return Ld}))),Md}var Od,_d=!1;function Pd(){return _d||(_d=!0,a(Od={}),Rd(),c(Od,Dd()),u(Od,"default",(function(){return Ld}))),Od}(function(){var t,e,n,i,r,o,s,a,u=[].slice;a=Pd(),n={cmd:"",ctrl:"",alt:"",option:"",shift:"",enter:"",left:"",right:"",up:"",down:""},i={cmd:"Cmd",ctrl:"Ctrl",alt:"Alt",option:"Alt",shift:"Shift",enter:"Enter",left:"Left",right:"Right",up:"Up",down:"Down"},o={"~":"`",_:"-","+":"=","|":"\\","{":"[","}":"]",":":";",'"':"'","<":",",">":".","?":"/"},s=function(t){var e,n,i,r,o;if(i=0,n=[],null==t)return n;for(e=r=0,o=t.length;r<o;e=++r)"."!==t[e]||0!==e&&"\\"===t[e-1]||(n.push(t.substring(i,e)),i=e+1);return n.push(t.substr(i,t.length)),n},e=function(t){return a.isObject(t)&&!a.isArray(t)},r={adviseBefore:function(t,e,n){var i;return i=t[e],t[e]=function(){var t;if(t=1<=arguments.length?u.call(arguments,0):[],!1!==n.apply(this,t))return i.apply(this,t)}},camelize:function(t){return t?t.replace(/[_-]+(\w)/g,(function(t){return t[1].toUpperCase()})):""},capitalize:function(t){return t?"github"===t.toLowerCase()?"GitHub":t[0].toUpperCase()+t.slice(1):""},compactObject:function(t){var e,n,i;for(e in n={},t)null!=(i=t[e])&&(n[e]=i);return n},dasherize:function(t){return t?(t=t[0].toLowerCase()+t.slice(1)).replace(/([A-Z])|(_)/g,(function(t,e){return e?"-"+e.toLowerCase():"-"})):""},deepClone:function(t){return a.isArray(t)?t.map((function(t){return r.deepClone(t)})):a.isObject(t)&&!a.isFunction(t)?r.mapObject(t,(function(t,e){return[t,r.deepClone(e)]})):t},deepExtend:function(t){var n,i,o,s,a,u,c;for(s=t,n=0;++n<arguments.length;)if(o=arguments[n],e(s)&&e(o))for(a=0,u=(c=Object.keys(o)).length;a<u;a++)s[i=c[a]]=r.deepExtend(s[i],o[i]);else s=r.deepClone(o);return s},deepContains:function(t,e){var n,i,r;if(null==t)return!1;for(i=0,r=t.length;i<r;i++)if(n=t[i],a.isEqual(n,e))return!0;return!1},endsWith:function(t,e){return null==e&&(e=""),!!t&&-1!==t.indexOf(e,t.length-e.length)},escapeAttribute:function(t){return t?t.replace(/"/g,"&quot;").replace(/\n/g,"").replace(/\\/g,"-"):""},escapeRegExp:function(t){return t?t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):""},humanizeEventName:function(t,e){var n,i,o,s;return i=(s=t.split(":"))[0],null==(n=s[1])?r.undasherize(i):(o=r.undasherize(i),null==e&&(e=r.undasherize(n)),o+": "+e)},humanizeKey:function(t,e){var s;return null==e&&(e=process.platform),t?(s="darwin"===e?n:i)[t]?s[t]:1===t.length&&null!=o[t]?[s.shift,o[t]]:1===t.length&&t===t.toUpperCase()&&t.toUpperCase()!==t.toLowerCase()?[s.shift,t.toUpperCase()]:1===t.length||/f[0-9]{1,2}/.test(t)?t.toUpperCase():"darwin"===e?t:r.capitalize(t):t},humanizeKeystroke:function(t,e){var n,i,o,s,u,c,l,h,d,f;if(null==e&&(e=process.platform),!t)return t;for(n=[],l=0,d=(u=t.split(" ")).length;l<d;l++){for(s=[],i=h=0,f=(c=(t=u[l]).split("-")).length;h<f;i=++h)""===(o=c[i])&&""===c[i-1]&&(o="-"),o&&s.push(r.humanizeKey(o,e));s=a.uniq(a.flatten(s)),s="darwin"===e?s.join(""):s.join("+"),n.push(s)}return n.join(" ")},isSubset:function(t,e){return a.every(t,(function(t){return a.include(e,t)}))},losslessInvert:function(t){var e,n,i;for(n in e={},t)null==e[i=t[n]]&&(e[i]=[]),e[i].push(n);return e},mapObject:function(t,e){var n,i,r,o,s,a,u;for(i={},o=0,s=(a=Object.keys(t)).length;o<s;o++)n=(u=e(n=a[o],t[n]))[0],r=u[1],i[n]=r;return i},multiplyString:function(t,e){var n,i;for(n="",i=0;i<e;)n+=t,i++;return n},pluralize:function(t,e,n){return null==t&&(t=0),null==n&&(n=e+"s"),1===t?t+" "+e:t+" "+n},remove:function(t,e){var n;return(n=t.indexOf(e))>=0&&t.splice(n,1),t},setValueForKeyPath:function(t,e,n){var i,r;for(r=s(e);r.length>1;)null==t[i=r.shift()]&&(t[i]={}),t=t[i];return null!=n?t[r.shift()]=n:delete t[r.shift()]},hasKeyPath:function(t,e){var n,i,r,o;for(r=0,o=(i=s(e)).length;r<o;r++){if(n=i[r],!t.hasOwnProperty(n))return!1;t=t[n]}return!0},spliceWithArray:function(t,e,n,i,r){var o,s,a,c;if(null==r&&(r=1e5),i.length<r)return t.splice.apply(t,[e,n].concat(u.call(i)));for(t.splice(e,n),c=[],o=s=0,a=i.length;r>0?s<=a:s>=a;o=s+=r)c.push(t.splice.apply(t,[e+o,0].concat(u.call(i.slice(o,o+r)))));return c},sum:function(t){var e,n,i;for(e=0,n=0,i=t.length;n<i;n++)e+=t[n];return e},uncamelcase:function(t){var e;return t?(e=t.replace(/([A-Z])|_+/g,(function(t,e){return null==e&&(e="")," "+e})),r.capitalize(e.trim())):""},undasherize:function(t){return t?t.split("-").map(r.capitalize).join(" "):""},underscore:function(t){return t?(t=t[0].toLowerCase()+t.slice(1)).replace(/([A-Z])|-+/g,(function(t,e){return null==e&&(e=""),"_"+e.toLowerCase()})):""},valueForKeyPath:function(t,e){var n,i,r;for(i=0,r=(n=s(e)).length;i<r;i++)if(null==(t=t[n[i]]))return;return t},isEqual:function(e,n,i,r){return a.isArray(i)&&a.isArray(r)?t(e,n,i,r):t(e,n)},isEqualForProperties:function(){var t,e,n,i,r,o;for(t=arguments[0],e=arguments[1],r=0,o=(n=3<=arguments.length?u.call(arguments,2):[]).length;r<o;r++)if(i=n[r],!a.isEqual(t[i],e[i]))return!1;return!0}},t=function(e,n,i,r){var o,s,u,c,l,h,d,f,p,g,m,v,y,b;if(null==i&&(i=[]),null==r&&(r=[]),e===n)return a.isEqual(e,n);if(a.isFunction(e)||a.isFunction(n))return a.isEqual(e,n);for(v=i.length;v--;)if(i[v]===e)return r[v]===n;if(i.push(e),r.push(n),p=!1,a.isFunction(null!=e?e.isEqual:void 0))p=e.isEqual(n,i,r);else if(a.isFunction(null!=n?n.isEqual:void 0))p=n.isEqual(e,r,i);else if(a.isArray(e)&&a.isArray(n)&&e.length===n.length){for(p=!0,g=y=0,b=e.length;y<b;g=++y)if(u=e[g],!t(u,n[g],i,r)){p=!1;break}}else if(a.isRegExp(e)&&a.isRegExp(n))p=a.isEqual(e,n);else if(a.isElement(e)&&a.isElement(n))p=e===n;else if(a.isObject(e)&&a.isObject(n))if(o=e.constructor,h=n.constructor,s=a.isFunction(o)&&o instanceof o,d=a.isFunction(h)&&h instanceof h,o===h||s&&d){for(m in c=0,p=!0,e)if(l=e[m],a.has(e,m)&&(c++,!a.has(n,m)||!t(l,n[m],i,r))){p=!1;break}if(p){for(m in f=0,n)n[m],a.has(n,m)&&f++;p=c===f}}else p=!1;else p=a.isEqual(e,n);return i.pop(),r.pop(),p},ne=a.extend({},a,r)}).call(ne),J();class Id{constructor(){this.canvas=document.createElement("canvas");const t="linux"!==process.platform;this.context=this.canvas.getContext("2d",{desynchronized:t}),this.canvas.webkitImageSmoothingEnabled=!1,this.context.imageSmoothingEnabled=!1,this.offscreenCanvas=document.createElement("canvas"),this.offscreenContext=this.offscreenCanvas.getContext("2d",{desynchronized:t}),this.offscreenCanvas.webkitImageSmoothingEnabled=!1,this.offscreenContext.imageSmoothingEnabled=!1}attach(t){this.canvas.parentNode||t.appendChild(this.canvas)}setSize(t=0,e=0){this.canvas.width=t,this.canvas.height=e,this.context.imageSmoothingEnabled=!1,this.resetOffscreenSize()}getSize(){return{width:this.canvas.width,height:this.canvas.height}}resetOffscreenSize(){this.offscreenCanvas.width=this.canvas.width,this.offscreenCanvas.height=this.canvas.height,this.offscreenContext.imageSmoothingEnabled=!1}copyToOffscreen(){this.canvas.width>0&&this.canvas.height>0&&this.offscreenContext.drawImage(this.canvas,0,0)}copyFromOffscreen(){this.offscreenCanvas.width>0&&this.offscreenCanvas.height>0&&this.context.drawImage(this.offscreenCanvas,0,0)}copyPartFromOffscreen(t,e,n){this.offscreenCanvas.width>0&&this.offscreenCanvas.height>0&&this.context.drawImage(this.offscreenCanvas,0,t,this.offscreenCanvas.width,n,0,e,this.offscreenCanvas.width,n)}clearCanvas(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}}class Hd extends Pt{initializeCanvas(){this.tokensLayer=new Id,this.backLayer=new Id,this.frontLayer=new Id,this.pendingChanges||(this.pendingChanges=[]),this.pendingBackDecorationChanges||(this.pendingBackDecorationChanges=[]),this.pendingFrontDecorationChanges||(this.pendingFrontDecorationChanges=[]),this.maxTokensInOneLine=atom.config.get("minimap.maxTokensInOneLine")}getFrontCanvas(){return this.frontLayer.canvas}attachCanvases(t){this.backLayer.attach(t),this.tokensLayer.attach(t),this.frontLayer.attach(t)}setCanvasesSize(t,e){this.backLayer.setSize(t,e),this.tokensLayer.setSize(t,e),this.frontLayer.setSize(t,e)}updateCanvas(){const t=this.minimap.getFirstVisibleScreenRow(),e=this.minimap.getLastVisibleScreenRow();this.updateTokensLayer(t,e),this.updateBackDecorationsLayer(t,e),this.updateFrontDecorationsLayer(t,e),this.pendingChanges=[],this.pendingBackDecorationChanges=[],this.pendingFrontDecorationChanges=[],this.offscreenFirstRow=t,this.offscreenLastRow=e}updateTokensLayer(t,e){const n=this.computeIntactRanges(t,e,this.pendingChanges);this.redrawRangesOnLayer(this.tokensLayer,n,t,e,this.drawLines)}updateBackDecorationsLayer(t,e){const n=this.computeIntactRanges(t,e,this.pendingBackDecorationChanges);this.redrawRangesOnLayer(this.backLayer,n,t,e,this.drawBackDecorationsForLines)}updateFrontDecorationsLayer(t,e){const n=this.computeIntactRanges(t,e,this.pendingFrontDecorationChanges);this.redrawRangesOnLayer(this.frontLayer,n,t,e,this.drawFrontDecorationsForLines)}getTextOpacity(){return this.textOpacity}getDefaultColor(){const t=this.retrieveStyleFromDom([".editor"],"color",!0);return this.transparentize(t,this.getTextOpacity())}getTokenColor(t){const e=t.scopeDescriptor||t.scopes,n=this.retrieveStyleFromDom(e,"color");return this.transparentize(n,this.getTextOpacity())}getDecorationColor(t){const e=t.getProperties();if(e.color)return e.color;if(e.scope){const t=e.scope.split(/\s+/);return this.retrieveStyleFromDom(t,"background-color")}return this.getDefaultColor()}transparentize(t,e=1){return t.replace("rgb(","rgba(").replace(")",`, ${e})`)}redrawRangesOnLayer(t,e,n,i,r){const o=this.minimap.getDevicePixelRatio(),s=this.minimap.getLineHeight()*o;if(t.clearCanvas(),0===e.length)r.call(this,n,i,0);else{for(let i=0,r=e.length;i<r;i++){const r=e[i];t.copyPartFromOffscreen(r.offscreenRow*s,(r.start-n)*s,(r.end-r.start)*s)}this.drawLinesForRanges(r,e,n,i)}t.resetOffscreenSize(),t.copyToOffscreen()}drawLinesForRanges(t,e,n,i){let r=n;for(let i=0,o=e.length;i<o;i++){const o=e[i];t.call(this,r,o.start,r-n),r=o.end}r<=i&&t.call(this,r,i,r-n)}drawBackDecorationsForLines(t,e,n){if(t>e)return;const i=this.minimap.getDevicePixelRatio(),r=this.minimap.getLineHeight()*i,o=this.minimap.getCharHeight()*i,s=this.minimap.getCharWidth()*i,a=this.minimap.decorationsByTypeThenRows(t,e),{width:u,height:c}=this.tokensLayer.getSize(),l={context:this.backLayer.context,canvasWidth:u,canvasHeight:c,lineHeight:r,charWidth:s,charHeight:o,orders:mf()};for(let i=t;i<=e;i++)l.row=n+(i-t),l.yRow=l.row*r,l.screenRow=i,this.drawDecorations(i,a,l,{line:this.drawLineDecoration,"highlight-under":this.drawHighlightDecoration,"background-custom":this.drawCustomDecoration});this.backLayer.context.fill()}drawFrontDecorationsForLines(t,e,n){if(t>e)return;const i=this.minimap.getDevicePixelRatio(),r=this.minimap.getLineHeight()*i,o=this.minimap.getCharHeight()*i,s=this.minimap.getCharWidth()*i,a=this.minimap.decorationsByTypeThenRows(t,e),{width:u,height:c}=this.tokensLayer.getSize(),l={context:this.frontLayer.context,canvasWidth:u,canvasHeight:c,lineHeight:r,charWidth:s,charHeight:o,orders:mf()};for(let i=t;i<=e;i++)l.row=n+(i-t),l.yRow=l.row*r,l.screenRow=i,this.drawDecorations(i,a,l,{gutter:this.drawGutterDecoration,"highlight-over":this.drawHighlightDecoration,"highlight-outline":this.drawHighlightOutlineDecoration,"foreground-custom":this.drawCustomDecoration});l.context.fill()}eachTokenForScreenRows(t,e,n){const i=this.getTextEditor(),r=this.getInvisibleRegExp();e=Math.min(e,i.getScreenLineCount());for(let o=t;o<e;o++){const t=i.tokensForScreenRow(o),e=t.length,s=Math.min(e,this.maxTokensInOneLine);for(let e=0;e<s;e++){const i=t[e];n(o,{text:i.text.replace(r," "),scopes:i.scopes})}}}drawLines(t,e,n){if(t>e)return;const i=this.minimap.getDevicePixelRatio(),r=this.minimap.getLineHeight()*i,o=this.minimap.getCharHeight()*i,s=this.minimap.getCharWidth()*i,a=this.displayCodeHighlights,u=this.tokensLayer.context,{width:c}=this.tokensLayer.getSize();let l,h,d=n*r-r;this.eachTokenForScreenRows(t,e,((t,e)=>{if(l!==t&&(h=0,d+=r,l=t,u.clearRect(h,d,c,r)),!(h>c))if(/^\s+$/.test(e.text))h+=e.text.length*s;else{const t=a?this.getTokenColor(e):this.getDefaultColor();h=this.drawToken(u,e.text,t,h,d,s,o)}})),u.fill()}getInvisibleRegExp(){const t=this.getTextEditor().getInvisibles(),e=[];return null!=t.cr&&e.push(t.cr),null!=t.eol&&e.push(t.eol),null!=t.space&&e.push(t.space),null!=t.tab&&e.push(t.tab),0!==e.length?RegExp(e.filter((t=>"string"==typeof t)).map(ne.escapeRegExp).join("|"),"g"):null}drawToken(t,e,n,i,r,o,s){if(t.fillStyle=n,this.ignoreWhitespacesInTokens){const n=e.length*o;return t.fillRect(i,r,n,s),i+n}{let n=0;for(let a=0,u=e.length;a<u;a++){const u=e[a];/\s/.test(u)?(n>0&&t.fillRect(i-n*o,r,n*o,s),n=0):n++,i+=o}return n>0&&t.fillRect(i-n*o,r,n*o,s),i}}drawDecorations(t,e,n,i){let r=[];n.context.clearRect(0,n.yRow,n.canvasWidth,n.lineHeight);for(const n in i)r=r.concat(null!=e[n]&&e[n][t]||[]);if(r.sort(((t,e)=>(n.orders[t.properties.plugin]||0)-(n.orders[e.properties.plugin]||0))),null!=r?r.length:void 0)for(let t=0,e=r.length;t<e;t++)i[r[t].properties.type].call(this,r[t],n)}drawLineDecoration(t,e){e.context.fillStyle=this.getDecorationColor(t),e.context.fillRect(0,e.yRow,e.canvasWidth,e.lineHeight)}drawGutterDecoration(t,e){e.context.fillStyle=this.getDecorationColor(t),e.context.fillRect(0,e.yRow,1,e.lineHeight)}drawHighlightDecoration(t,e){const n=t.getMarker().getScreenRange(),i=n.end.row-n.start.row;if(e.context.fillStyle=this.getDecorationColor(t),0===i){const t=n.end.column-n.start.column;e.context.fillRect(n.start.column*e.charWidth,e.yRow,t*e.charWidth,e.lineHeight)}else if(e.screenRow===n.start.row){const t=n.start.column*e.charWidth;e.context.fillRect(t,e.yRow,e.canvasWidth-t,e.lineHeight)}else e.screenRow===n.end.row?e.context.fillRect(0,e.yRow,n.end.column*e.charWidth,e.lineHeight):e.context.fillRect(0,e.yRow,e.canvasWidth,e.lineHeight)}drawHighlightOutlineDecoration(t,e){let n,i,r,o,s,a;const{lineHeight:u,charWidth:c,canvasWidth:l,screenRow:h}=e,d=t.getMarker().getScreenRange(),f=d.end.row-d.start.row,p=e.yRow,g=p+u;e.context.fillStyle=this.getDecorationColor(t),0===f?(i=d.end.column-d.start.column,r=i*c,a=d.start.column*c,s=a+r,e.context.fillRect(a,p,r,1),e.context.fillRect(a,g-1,r,1),e.context.fillRect(a,p,1,u),e.context.fillRect(s,p,1,u)):1===f?(a=d.start.column*e.charWidth,s=d.end.column*e.charWidth,h===d.start.row?(r=e.canvasWidth-a,o=Math.max(a,s),n=e.canvasWidth-o,e.context.fillRect(a,p,r,1),e.context.fillRect(o,g-1,n,1),e.context.fillRect(a,p,1,u),e.context.fillRect(l-1,p,1,u)):(r=l-a,n=l-s,e.context.fillRect(0,p,a,1),e.context.fillRect(0,g-1,s,1),e.context.fillRect(0,p,1,u),e.context.fillRect(s,p,1,u))):(a=d.start.column*c,s=d.end.column*c,h===d.start.row?(r=l-a,e.context.fillRect(a,p,r,1),e.context.fillRect(a,p,1,u),e.context.fillRect(l-1,p,1,u)):h===d.end.row?(r=l-a,e.context.fillRect(0,g-1,s,1),e.context.fillRect(0,p,1,u),e.context.fillRect(s,p,1,u)):(e.context.fillRect(0,p,1,u),e.context.fillRect(l-1,p,1,u),h===d.start.row+1&&e.context.fillRect(0,p,a,1),h===d.end.row-1&&e.context.fillRect(s,g-1,l-s,1)))}drawCustomDecoration(t,e){const n=t.getProperties().render;n&&(e.color=this.getDecorationColor(t),n(t,e))}computeIntactRanges(t,e,n){if(null==this.offscreenFirstRow&&null==this.offscreenLastRow)return[];let i=[{start:this.offscreenFirstRow,end:this.offscreenLastRow,offscreenRow:0}];for(let t=0,e=n.length;t<e;t++){const e=n[t],r=[];for(let t=0,n=i.length;t<n;t++){const n=i[t];e.end<n.start&&0!==e.screenDelta?r.push({start:n.start+e.screenDelta,end:n.end+e.screenDelta,offscreenRow:n.offscreenRow}):e.end<n.start||e.start>n.end?r.push(n):(e.start>n.start&&r.push({start:n.start,end:e.start-1,offscreenRow:n.offscreenRow}),e.end<n.end&&(0!==e.bufferDelta||0!==e.screenDelta?r.push({start:e.end+e.screenDelta+1,end:n.end+e.screenDelta,offscreenRow:n.offscreenRow+e.end+1-n.start}):r.push({start:e.end+1,end:n.end,offscreenRow:n.offscreenRow+e.end+1-n.start})))}i=r}return this.truncateIntactRanges(i,t,e)}truncateIntactRanges(t,e,n){let i=0;for(;i<t.length;){const r=t[i];r.start<e&&(r.offscreenRow+=e-r.start,r.start=e),r.end>n&&(r.end=n),r.start>=r.end&&t.splice(i--,1),i++}return t.sort(((t,e)=>t.offscreenRow-e.offscreenRow))}}function Nd(t,...e){e.forEach((e=>{var n,i;n=t,i=e,Object.getOwnPropertyNames(i).forEach((t=>{if(["length","name","arguments","caller","prototype","includeInto"].indexOf(t)>=0)return;const e=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(n,t,e)})),Object.getOwnPropertyNames(i.prototype).forEach((t=>{if("constructor"===t)return;const e=Object.getOwnPropertyDescriptor(i.prototype,t);Object.defineProperty(n.prototype,t,e)}))}))}var Fd={};function jd(t,e){return p.registerOrUpdateElement(e,{class:t})}a(Fd),u(Fd,"default",(function(){return jd}));const Wd=class{static initClass(){return Nd(this,p.EventsDelegation,p.SpacePenDSL.Babel),jd(this,"minimap-quick-settings")}static content(){this.div({class:"select-list popover-list minimap-quick-settings"},(()=>{this.input({type:"text",class:"hidden-input",outlet:"hiddenInput"}),this.ol({class:"list-group mark-active",outlet:"list"},(()=>{this.li({class:"separator",outlet:"separator"}),this.li({class:"code-highlights",outlet:"codeHighlights"},"code-highlights"),this.li({class:"absolute-mode",outlet:"absoluteMode"},"absolute-mode"),this.li({class:"adjust-absolute-mode-height",outlet:"adjustAbsoluteModeHeight"},"adjust-absolute-mode-height")})),this.div({class:"btn-group"},(()=>{this.button({class:"btn btn-default",outlet:"onLeftButton"},"On Left"),this.button({class:"btn btn-default",outlet:"onRightButton"},"On Right")}))}))}createdCallback(){this.buildContent()}setModel(t){this.selectedItem=null,this.minimap=t,this.emitter=new o,this.subscriptions=new i,this.plugins={},this.itemsActions=new WeakMap;const e=this.subscriptions;e.add(Rf((({name:t,plugin:e})=>this.addItemFor(t,e)))),e.add(Of((({name:t,plugin:e})=>this.removeItemFor(t,e)))),e.add(_f((({name:t,plugin:e})=>this.activateItem(t,e)))),e.add(Pf((({name:t,plugin:e})=>this.deactivateItem(t,e)))),e.add(atom.commands.add("minimap-quick-settings",{"core:move-up":()=>{this.selectPreviousItem()},"core:move-down":()=>{this.selectNextItem()},"core:move-left":()=>{atom.config.set("minimap.displayMinimapOnLeft",!0)},"core:move-right":()=>{atom.config.set("minimap.displayMinimapOnLeft",!1)},"core:cancel":()=>{this.destroy()},"core:confirm":()=>{this.toggleSelectedItem()}})),this.codeHighlights.classList.toggle("active",this.minimap.displayCodeHighlights),e.add(this.subscribeTo(this.codeHighlights,{mousedown:t=>{t.preventDefault(),atom.config.set("minimap.displayCodeHighlights",!this.minimap.displayCodeHighlights)}})),this.itemsActions.set(this.codeHighlights,(()=>{atom.config.set("minimap.displayCodeHighlights",!this.minimap.displayCodeHighlights)})),e.add(this.subscribeTo(this.absoluteMode,{mousedown:t=>{t.preventDefault(),atom.config.set("minimap.absoluteMode",!atom.config.get("minimap.absoluteMode"))}})),this.itemsActions.set(this.absoluteMode,(()=>{atom.config.set("minimap.absoluteMode",!atom.config.get("minimap.absoluteMode"))})),e.add(this.subscribeTo(this.adjustAbsoluteModeHeight,{mousedown:t=>{t.preventDefault(),atom.config.set("minimap.adjustAbsoluteModeHeight",!atom.config.get("minimap.adjustAbsoluteModeHeight"))}})),this.itemsActions.set(this.adjustAbsoluteModeHeight,(()=>{atom.config.set("minimap.adjustAbsoluteModeHeight",!atom.config.get("minimap.adjustAbsoluteModeHeight"))})),e.add(this.subscribeTo(this.hiddenInput,{focusout:t=>{this.destroy()}},{passive:!0})),e.add(this.subscribeTo(this.onLeftButton,{mousedown:t=>{t.preventDefault(),atom.config.set("minimap.displayMinimapOnLeft",!0)}})),e.add(this.subscribeTo(this.onRightButton,{mousedown:t=>{t.preventDefault(),atom.config.set("minimap.displayMinimapOnLeft",!1)}})),e.add(atom.config.observe("minimap.displayCodeHighlights",(t=>{this.codeHighlights.classList.toggle("active",t)}))),e.add(atom.config.observe("minimap.absoluteMode",(t=>{this.absoluteMode.classList.toggle("active",t)}))),e.add(atom.config.observe("minimap.adjustAbsoluteModeHeight",(t=>{this.adjustAbsoluteModeHeight.classList.toggle("active",t)}))),e.add(atom.config.observe("minimap.displayMinimapOnLeft",(t=>{this.onLeftButton.classList.toggle("selected",t),this.onRightButton.classList.toggle("selected",!t)}))),this.initList()}onDidDestroy(t){return this.emitter.on("did-destroy",t)}attach(){atom.views.getView(atom.workspace).appendChild(this),this.hiddenInput.focus()}destroy(){this.emitter.emit("did-destroy"),this.subscriptions.dispose(),this.parentNode.removeChild(this)}initList(){this.itemsDisposables=new WeakMap;for(const t in of)this.addItemFor(t,of[t])}toggleSelectedItem(){const t=this.itemsActions.get(this.selectedItem);"function"==typeof t&&t()}selectNextItem(){this.selectedItem.classList.remove("selected"),null!=this.selectedItem.nextSibling?(this.selectedItem=this.selectedItem.nextSibling,this.selectedItem.matches(".separator")&&(this.selectedItem=this.selectedItem.nextSibling)):this.selectedItem=this.list.firstChild,this.selectedItem.classList.add("selected")}selectPreviousItem(){this.selectedItem.classList.remove("selected"),null!=this.selectedItem.previousSibling?(this.selectedItem=this.selectedItem.previousSibling,this.selectedItem.matches(".separator")&&(this.selectedItem=this.selectedItem.previousSibling)):this.selectedItem=this.list.lastChild,this.selectedItem.classList.add("selected")}addItemFor(t,e){const n=document.createElement("li"),i=()=>{lf(t)};e.isActive()&&n.classList.add("active"),n.textContent=t,this.itemsActions.set(n,i),this.itemsDisposables.set(n,this.addDisposableEventListener(n,"mousedown",(t=>{t.preventDefault(),i()}))),this.plugins[t]=n,this.list.insertBefore(n,this.separator),null==this.selectedItem&&(this.selectedItem=n,this.selectedItem.classList.add("selected"))}removeItemFor(t,e){try{this.list.removeChild(this.plugins[t])}catch(t){}delete this.plugins[t]}activateItem(t,e){this.plugins[t].classList.add("active")}deactivateItem(t,e){this.plugins[t].classList.remove("active")}}.initClass();const Bd=s(dt)({strategy:"scroll"});let qd;const zd=t=>{qd&&(qd.textContent=`\n    atom-text-editor[with-minimap].editor > div,\n    atom-text-editor[with-minimap] > div {\n      margin-left: ${t}px;\n    }\n    `)},Ud=atom.inSpecMode();const Vd=class{static initClass(){return Nd(this,It,Hd,p.EventsDelegation,p.AncestorsMethods),jd(this,"atom-text-editor-minimap")}createdCallback(){return this.minimap=void 0,this.editorElement=void 0,this.width=void 0,this.height=void 0,this.subscriptions=new i,this.visibleAreaSubscription=void 0,this.quickSettingsSubscription=void 0,this.dragSubscription=void 0,this.openQuickSettingSubscription=void 0,this.displayMinimapOnLeft=!1,this.minimapScrollIndicator=void 0,this.displayMinimapOnLeft=void 0,this.displayPluginsControls=void 0,this.textOpacity=void 0,this.displayCodeHighlights=void 0,this.adjustToSoftWrap=void 0,this.useHardwareAcceleration=void 0,this.absoluteMode=void 0,this.visibleArea=void 0,this.controls=void 0,this.scrollIndicator=void 0,this.openQuickSettings=void 0,this.quickSettingsElement=void 0,this.attached=void 0,this.attachedToTextEditor=void 0,this.standAlone=void 0,this.wasVisible=void 0,this.offscreenFirstRow=void 0,this.offscreenLastRow=void 0,this.frameRequested=void 0,this.flexBasis=void 0,this.initializeContent(),this.observeConfig({"minimap.displayMinimapOnLeft":t=>{this.displayMinimapOnLeft=t,t?qd||(qd=document.createElement("style"),qd.setAttribute("context","atom-text-editor-minimap"),document.head.appendChild(qd)):qd&&(qd.parentNode.removeChild(qd),qd=null),this.updateMinimapFlexPosition(),this.measureHeightAndWidth(!0,!0)},"minimap.minimapScrollIndicator":t=>{this.minimapScrollIndicator=t,this.minimapScrollIndicator&&null==this.scrollIndicator&&!this.standAlone?this.initializeScrollIndicator():null!=this.scrollIndicator&&this.disposeScrollIndicator(),this.attached&&this.requestUpdate()},"minimap.displayPluginsControls":t=>{this.displayPluginsControls=t,this.displayPluginsControls&&null==this.openQuickSettings&&!this.standAlone?this.initializeOpenQuickSettings():null!=this.openQuickSettings&&this.disposeOpenQuickSettings()},"minimap.textOpacity":t=>{this.textOpacity=t,this.attached&&this.requestForcedUpdate()},"minimap.displayCodeHighlights":t=>{this.displayCodeHighlights=t,this.attached&&this.requestForcedUpdate()},"minimap.smoothScrolling":t=>{this.smoothScrolling=t,this.attached&&(this.smoothScrolling?this.requestUpdate():(this.backLayer.canvas.style.cssText="",this.tokensLayer.canvas.style.cssText="",this.frontLayer.canvas.style.cssText=""))},"minimap.adjustMinimapWidthToSoftWrap":t=>{this.adjustToSoftWrap=t,this.attached&&this.measureHeightAndWidth()},"minimap.adjustMinimapWidthOnlyIfSmaller":t=>{this.adjustOnlyIfSmaller=t,this.attached&&this.measureHeightAndWidth()},"minimap.useHardwareAcceleration":t=>{this.useHardwareAcceleration=t,this.attached&&this.requestUpdate()},"minimap.absoluteMode":t=>{this.absoluteMode=t,this.classList.toggle("absolute",this.absoluteMode)},"minimap.adjustAbsoluteModeHeight":t=>{this.adjustAbsoluteModeHeight=t,this.classList.toggle("adjust-absolute-height",this.adjustAbsoluteModeHeight),this.attached&&this.measureHeightAndWidth()},"minimap.ignoreWhitespacesInTokens":t=>{this.ignoreWhitespacesInTokens=t,this.attached&&this.requestForcedUpdate()},"editor.preferredLineLength":()=>{this.attached&&this.measureHeightAndWidth()},"editor.softWrap":()=>{this.attached&&this.requestUpdate()},"editor.showInvisibles":()=>{this.attached&&this.requestUpdate()},"editor.invisibles":()=>{this.attached&&this.requestUpdate()},"editor.softWrapAtPreferredLineLength":()=>{this.attached&&this.requestUpdate()}})}attachedCallback(){if("function"==typeof atom.views.pollDocument)this.subscriptions.add(atom.views.pollDocument((()=>{this.pollDOM()})));else{this.intersectionObserver=new IntersectionObserver((t=>{const{intersectionRect:e}=t[t.length-1];(e.width>0||e.height>0)&&this.measureHeightAndWidth(!0,!0)})),this.intersectionObserver.observe(this),this.isVisible()&&this.measureHeightAndWidth(!0,!0);const t=()=>{this.measureHeightAndWidth(!1,!1)};Bd.listenTo(this,t),this.subscriptions.add(new r((()=>{Bd.removeListener(this,t)}))),window.addEventListener("resize",t,{passive:!0}),this.subscriptions.add(new r((()=>{window.removeEventListener("resize",t)})))}this.measureHeightAndWidth(),this.updateMinimapFlexPosition(),this.attached=!0,this.attachedToTextEditor=this.queryParentSelector("atom-text-editor")===this.getTextEditorElement(),this.attachedToTextEditor&&this.getTextEditorElement().setAttribute("with-minimap",""),this.subscriptions.add(atom.styles.onDidAddStyleElement((()=>{this.invalidateDOMStylesCache(),this.requestForcedUpdate()}))),this.subscriptions.add(this.subscribeToMediaQuery())}detachedCallback(){this.getTextEditorElement().removeAttribute("with-minimap"),this.attached=!1}isVisible(){return this.offsetWidth>0||this.offsetHeight>0}attach(t){if(this.attached)return;const e=t||this.getTextEditorElement(),n=e.querySelectorAll("atom-text-editor-minimap");n.length&&Array.prototype.forEach.call(n,(t=>{t.destroy()})),e.appendChild(this)}detach(){this.attached&&null!=this.parentNode&&this.parentNode.removeChild(this)}updateMinimapFlexPosition(){this.classList.toggle("left",this.displayMinimapOnLeft)}destroy(){this.subscriptions.dispose(),this.detach(),this.minimap=null}initializeContent(){this.initializeCanvas(),this.attachCanvases(this),this.createVisibleArea(),this.createControls(),this.subscriptions.add(this.subscribeTo(this,{mousewheel:t=>{!this.standAlone&&this.minimap.onMouseWheel&&this.minimap.onMouseWheel(t)}},{passive:!0})),this.subscriptions.add(this.subscribeTo(this.getFrontCanvas(),{mousedown:t=>{this.canvasPressed(this.extractMouseEventData(t))},touchstart:t=>{this.canvasPressed(this.extractTouchEventData(t))}},{passive:!0}))}createVisibleArea(){this.visibleArea||(this.visibleArea=document.createElement("div"),this.visibleArea.classList.add("minimap-visible-area"),this.appendChild(this.visibleArea),this.visibleAreaSubscription=this.subscribeTo(this.visibleArea,{mousedown:t=>{this.startDrag(this.extractMouseEventData(t))},touchstart:t=>{this.startDrag(this.extractTouchEventData(t))}},{passive:!0}),this.subscriptions.add(this.visibleAreaSubscription))}removeVisibleArea(){this.visibleArea&&(this.subscriptions.remove(this.visibleAreaSubscription),this.visibleAreaSubscription.dispose(),this.removeChild(this.visibleArea),delete this.visibleArea)}createControls(){this.controls||this.standAlone||(this.controls=document.createElement("div"),this.controls.classList.add("minimap-controls"),this.appendChild(this.controls))}removeControls(){this.controls&&(this.removeChild(this.controls),delete this.controls)}initializeScrollIndicator(){this.scrollIndicator||this.standAlone||(this.scrollIndicator=document.createElement("div"),this.scrollIndicator.classList.add("minimap-scroll-indicator"),this.controls.appendChild(this.scrollIndicator))}disposeScrollIndicator(){this.scrollIndicator&&(this.controls.removeChild(this.scrollIndicator),delete this.scrollIndicator)}initializeOpenQuickSettings(){this.openQuickSettings||this.standAlone||(this.openQuickSettings=document.createElement("div"),this.openQuickSettings.classList.add("open-minimap-quick-settings"),this.controls.appendChild(this.openQuickSettings),this.openQuickSettingSubscription=this.subscribeTo(this.openQuickSettings,{mousedown:t=>{if(t.preventDefault(),t.stopPropagation(),null!=this.quickSettingsElement)this.quickSettingsElement.destroy(),this.quickSettingsSubscription.dispose();else{this.quickSettingsElement=new Wd,this.quickSettingsElement.setModel(this),this.quickSettingsSubscription=this.quickSettingsElement.onDidDestroy((()=>{this.quickSettingsElement=null}));const{top:t,left:e,right:n}=this.getFrontCanvas().getBoundingClientRect();this.quickSettingsElement.style.top=t+"px",this.quickSettingsElement.attach(),this.displayMinimapOnLeft?this.quickSettingsElement.style.left=n+"px":this.quickSettingsElement.style.left=e-this.quickSettingsElement.clientWidth+"px"}}}))}disposeOpenQuickSettings(){this.openQuickSettings&&(this.controls.removeChild(this.openQuickSettings),this.openQuickSettingSubscription.dispose(),delete this.openQuickSettings)}getTextEditor(){return this.minimap.getTextEditor()}getTextEditorElement(){return this.editorElement||(this.editorElement=atom.views.getView(this.getTextEditor())),this.editorElement}getModel(){return this.minimap}setModel(t){return this.minimap=t,this.subscriptions.add(this.minimap.onDidChangeScrollTop((()=>{this.requestUpdate()}))),this.subscriptions.add(this.minimap.onDidChangeScrollLeft((()=>{this.requestUpdate()}))),this.subscriptions.add(this.minimap.onDidDestroy((()=>{this.destroy()}))),this.subscriptions.add(this.minimap.onDidChangeConfig((()=>{if(this.attached)return this.requestForcedUpdate()}))),this.subscriptions.add(this.minimap.onDidChangeStandAlone((()=>{this.setStandAlone(this.minimap.isStandAlone()),this.requestUpdate()}))),this.subscriptions.add(this.minimap.onDidChange((t=>{this.pendingChanges.push(t),this.requestUpdate()}))),this.subscriptions.add(this.minimap.onDidChangeDecorationRange((t=>{const{type:e}=t;"line"===e||"highlight-under"===e||"background-custom"===e?this.pendingBackDecorationChanges.push(t):this.pendingFrontDecorationChanges.push(t),this.requestUpdate()}))),this.subscriptions.add(If((()=>{this.requestForcedUpdate()}))),this.setStandAlone(this.minimap.isStandAlone()),null!=this.width&&null!=this.height&&this.minimap.setScreenHeightAndWidth(this.height,this.width),this.minimap}setStandAlone(t){this.standAlone=t,this.standAlone?(this.setAttribute("stand-alone",!0),this.disposeScrollIndicator(),this.disposeOpenQuickSettings(),this.removeControls(),this.removeVisibleArea()):(this.removeAttribute("stand-alone"),this.createVisibleArea(),this.createControls(),this.minimapScrollIndicator&&this.initializeScrollIndicator(),this.displayPluginsControls&&this.initializeOpenQuickSettings())}requestUpdate(){this.frameRequested||(this.frameRequested=!0,requestAnimationFrame((()=>{this.update(),this.frameRequested=!1})))}requestForcedUpdate(){this.offscreenFirstRow=null,this.offscreenLastRow=null,this.requestUpdate()}update(){if(!(this.attached&&this.isVisible()&&this.minimap))return;const t=this.minimap;t.enableCache();const e=this.getFrontCanvas(),n=this.minimap.getDevicePixelRatio(),i=t.getTextEditorScaledScrollLeft(),r=t.getTextEditorScaledScrollTop()-t.getScrollTop(),o=Math.min(e.width/n,this.width),s=o+i;this.adjustToSoftWrap&&this.flexBasis?(this.style.flexBasis=this.flexBasis+"px",this.style.width=this.flexBasis+"px"):(this.style.flexBasis=null,this.style.width=null),Ud?this.applyStyles(this.visibleArea,{width:Math.round(s)+"px",height:Math.round(t.getTextEditorScaledHeight())+"px",top:Math.round(r)+"px","border-left-width":Math.round(i)+"px"}):this.applyStyles(this.visibleArea,{width:Math.round(s)+"px",height:Math.round(t.getTextEditorScaledHeight())+"px",transform:this.makeTranslate(0,r),"border-left-width":Math.round(i)+"px"}),this.applyStyles(this.controls,{width:Math.round(o)+"px"});const a=t.getFirstVisibleScreenRow()*t.getLineHeight()-t.getScrollTop();if(this.smoothScrolling)if(Ud)this.applyStyles(this.backLayer.canvas,{top:a+"px"}),this.applyStyles(this.tokensLayer.canvas,{top:a+"px"}),this.applyStyles(this.frontLayer.canvas,{top:a+"px"});else{let t=this.makeTranslate(0,a);1!==n&&(t+=" "+this.makeScale(1/n)),this.applyStyles(this.backLayer.canvas,{transform:t}),this.applyStyles(this.tokensLayer.canvas,{transform:t}),this.applyStyles(this.frontLayer.canvas,{transform:t})}else{const t=this.makeScale(1/n);this.applyStyles(this.backLayer.canvas,{transform:t}),this.applyStyles(this.tokensLayer.canvas,{transform:t}),this.applyStyles(this.frontLayer.canvas,{transform:t})}if(this.minimapScrollIndicator&&!this.scrollIndicator&&t.canScroll()&&this.initializeScrollIndicator(),null!=this.scrollIndicator){const e=t.getScreenHeight(),n=e*(e/t.getHeight()),i=(e-n)*t.getScrollRatio();Ud?this.applyStyles(this.scrollIndicator,{height:n+"px",top:i+"px"}):this.applyStyles(this.scrollIndicator,{height:n+"px",transform:this.makeTranslate(0,i)}),t.canScroll()||this.disposeScrollIndicator()}this.absoluteMode&&this.adjustAbsoluteModeHeight&&this.updateCanvasesSize(),this.updateCanvas(),t.clearCache()}setDisplayCodeHighlights(t){this.displayCodeHighlights=t,this.attached&&this.requestForcedUpdate()}pollDOM(){const t=this.checkForVisibilityChange();this.isVisible()&&(this.wasVisible||this.requestForcedUpdate(),this.measureHeightAndWidth(t,!1))}checkForVisibilityChange(){return this.isVisible()?!this.wasVisible&&(this.wasVisible=!0,this.wasVisible):this.wasVisible?(this.wasVisible=!1,!0):(this.wasVisible=!1,this.wasVisible)}measureHeightAndWidth(t,e=!0){if(!this.minimap)return;const n=this.style.flexBasis;this.style.flexBasis="";const i=this.width!==this.clientWidth||this.height!==this.clientHeight;this.height=this.clientHeight,this.width=this.clientWidth;let r=this.width;if(null!=this.minimap&&this.minimap.setScreenHeightAndWidth(this.height,this.width),(i||t||e)&&this.requestForcedUpdate(),this.isVisible())if(i||e){if(this.adjustToSoftWrap){const t=atom.config.get("editor.preferredLineLength"),e=atom.config.get("editor.softWrap"),n=atom.config.get("editor.softWrapAtPreferredLineLength"),i=t*this.minimap.getCharWidth();e&&n&&t&&(i<=this.width||!this.adjustOnlyIfSmaller)?(this.flexBasis=i,r=i,zd(i)):(zd(r),delete this.flexBasis)}else zd(r),delete this.flexBasis;this.updateCanvasesSize(r)}else this.style.flexBasis=n}updateCanvasesSize(t){const e=this.minimap.getDevicePixelRatio(),n=this.height+this.minimap.getLineHeight(),i=this.absoluteMode&&this.adjustAbsoluteModeHeight?Math.min(this.minimap.getHeight(),n):n,r=this.getFrontCanvas();null==t&&(t=r.width/e),t===r.width&&i===r.height||(this.setCanvasesSize(t*e,i*e),this.absoluteMode&&this.adjustAbsoluteModeHeight&&(this.offscreenFirstRow=null,this.offscreenLastRow=null))}observeConfig(t={}){for(const e in t)this.subscriptions.add(atom.config.observe(e,t[e]))}canvasPressed({y:t,isLeftMouse:e,isMiddleMouse:n}){if(!this.minimap.isStandAlone())if(e)this.canvasLeftMousePressed(t);else if(n){this.canvasMiddleMousePressed(t);const{top:e,height:n}=this.visibleArea.getBoundingClientRect();this.startDrag({y:e+n/2,isLeftMouse:!1,isMiddleMouse:!0})}}canvasLeftMousePressed(t){const e=t-this.getBoundingClientRect().top,n=Math.floor(e/this.minimap.getLineHeight())+this.minimap.getFirstVisibleScreenRow(),i=this.minimap.getTextEditor(),r=this.getTextEditorElement(),o=n*i.getLineHeightInPixels()-this.minimap.getTextEditorHeight()/2,s=r.pixelPositionForScreenPosition([n,0]).top-this.minimap.getTextEditorHeight()/2;if(atom.config.get("minimap.moveCursorOnMinimapClick")&&i.setCursorScreenPosition([n,0]),atom.config.get("minimap.scrollAnimation")){const t=atom.config.get("minimap.scrollAnimationDuration"),e=this.minimap.scrollIndependentlyOnMouseWheel(),n=this.minimap.getTextEditorScrollTop(),i=s;let r;if(e){const e=this.minimap.getScrollTop(),s=Math.min(1,o/(this.minimap.getTextEditorMaxScrollTop()||1))*this.minimap.getMaxScrollTop();r=(t,n)=>{this.minimap.setTextEditorScrollTop(t,!0),this.minimap.setScrollTop(e+(s-e)*n)},this.animate({from:n,to:i,duration:t,step:r})}else r=t=>this.minimap.setTextEditorScrollTop(t),this.animate({from:n,to:i,duration:t,step:r})}else this.minimap.setTextEditorScrollTop(s)}canvasMiddleMousePressed(t){const{top:e}=this.getBoundingClientRect(),n=(t-e-this.minimap.getTextEditorScaledHeight()/2)/(this.minimap.getVisibleHeight()-this.minimap.getTextEditorScaledHeight());this.minimap.setTextEditorScrollTop(n*this.minimap.getTextEditorMaxScrollTop())}extractMouseEventData(t){return{x:t.pageX,y:t.pageY,isLeftMouse:1===t.which,isMiddleMouse:2===t.which}}extractTouchEventData(t){const e=t.changedTouches[0];return{x:e.pageX,y:e.pageY,isLeftMouse:!0,isMiddleMouse:!1}}subscribeToMediaQuery(){const t=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"),e=t=>{this.requestForcedUpdate()};return t.addListener(e),new r((()=>{t.removeListener(e)}))}startDrag({y:t,isLeftMouse:e,isMiddleMouse:n}){if(!this.minimap)return;if(!e&&!n)return;const{top:i}=this.visibleArea.getBoundingClientRect(),{top:o}=this.getBoundingClientRect(),s={dragOffset:t-i,offsetTop:o},a=t=>this.drag(this.extractMouseEventData(t),s),u=t=>this.endDrag(),c=t=>this.drag(this.extractTouchEventData(t),s),l=t=>this.endDrag();document.body.addEventListener("mousemove",a,{passive:!0}),document.body.addEventListener("mouseup",u,{passive:!0}),document.body.addEventListener("mouseleave",u,{passive:!0}),document.body.addEventListener("touchmove",c,{passive:!0}),document.body.addEventListener("touchend",l,{passive:!0}),document.body.addEventListener("touchcancel",l,{passive:!0}),this.dragSubscription=new r((function(){document.body.removeEventListener("mousemove",a),document.body.removeEventListener("mouseup",u),document.body.removeEventListener("mouseleave",u),document.body.removeEventListener("touchmove",c),document.body.removeEventListener("touchend",l),document.body.removeEventListener("touchcancel",l)}))}drag({y:t,isLeftMouse:e,isMiddleMouse:n},i){if(!this.minimap)return;if(!e&&!n)return;const r=(t-i.offsetTop-i.dragOffset)/(this.minimap.getVisibleHeight()-this.minimap.getTextEditorScaledHeight());this.minimap.setTextEditorScrollTop(r*this.minimap.getTextEditorMaxScrollTop())}endDrag(){this.minimap&&this.dragSubscription.dispose()}applyStyles(t,e){if(!t)return;let n="";for(const t in e)n+=`${t}: ${e[t]}; `;t.style.cssText=n}makeTranslate(t=0,e=0){return this.useHardwareAcceleration?`translate3d(${t}px, ${e}px, 0)`:`translate(${t}px, ${e}px)`}makeScale(t=0,e=t){return this.useHardwareAcceleration?`scale3d(${t}, ${e}, 1)`:`scale(${t}, ${e})`}getTime(){return new Date}animate({from:t,to:e,duration:n,step:i}){const r=this.getTime();let o;const s=()=>{if(!this.minimap)return;const a=this.getTime()-r;o=0===n?1:a/n,o>1&&(o=1);const u=function(t){return.5-Math.cos(t*Math.PI)/2}(o);i(t+(e-t)*u,u),o<1&&requestAnimationFrame(s)};s()}}.initClass();function $d(){return d||(d=!0,l={},l=Promise.resolve(require("./minimap-plugin-generator-element.6724e1fd.js"))),l}var Qd,Kd,Gd=!1;let Zd=0;class Yd{static isType(t,e){return Array.isArray(t.type)?t.type.indexOf(e)>=0:e===t.type}constructor(t,e,n){this.marker=t,this.minimap=e,this.emitter=new o,this.id=Zd++,this.properties=null,this.setProperties(n),this.properties.id=this.id,this.destroyed=!1,this.markerDestroyDisposable=this.marker.onDidDestroy((()=>{this.destroy()})),this.screenRange=t.getScreenRange()}destroy(){this.destroyed||(this.markerDestroyDisposable.dispose(),this.markerDestroyDisposable=null,this.destroyed=!0,this.emitter.emit("did-destroy"),this.emitter.dispose())}isDestroyed(){return this.destroyed}onDidChangeProperties(t){return this.emitter.on("did-change-properties",t)}onDidDestroy(t){return this.emitter.on("did-destroy",t)}getId(){return this.id}getMarker(){return this.marker}isType(t){return Yd.isType(this.properties,t)}getProperties(){return this.properties}setProperties(t){if(this.destroyed)return;const e=this.properties;this.properties=t,this.properties.id=this.id,this.emitter.emit("did-change-properties",{oldProperties:e,newProperties:t})}}class Xd{initializeDecorations(){null==this.emitter&&(this.emitter=new o),this.decorationsById={},this.decorationsByMarkerId={},this.decorationMarkerChangedSubscriptions={},this.decorationMarkerDestroyedSubscriptions={},this.decorationUpdatedSubscriptions={},this.decorationDestroyedSubscriptions={}}getDecorations(){const t=this.decorationsById,e=[];for(const n in t)e.push(t[n]);return e}onDidAddDecoration(t){return this.emitter.on("did-add-decoration",t)}onDidRemoveDecoration(t){return this.emitter.on("did-remove-decoration",t)}onDidChangeDecoration(t){return this.emitter.on("did-change-decoration",t)}onDidChangeDecorationRange(t){return this.emitter.on("did-change-decoration-range",t)}onDidUpdateDecoration(t){return this.emitter.on("did-update-decoration",t)}decorationForId(t){return this.decorationsById[t]}decorationsForScreenRowRange(t,e){const n={},i=this.findMarkers({intersectsScreenRowRange:[t,e]});for(let t=0,e=i.length;t<e;t++){const e=i[t],r=this.decorationsByMarkerId[e.id];null!=r&&(n[e.id]=r)}return n}decorationsByTypeThenRows(){if(null!=this.decorationsByTypeThenRowsCache)return this.decorationsByTypeThenRowsCache;const t={};for(const e in this.decorationsById){const n=this.decorationsById[e],i=n.marker.getScreenRange(),r=n.getProperties().type;null==t[r]&&(t[r]={});for(let e=i.start.row,o=i.end.row;e<=o;e++)null==t[r][e]&&(t[r][e]=[]),t[r][e].push(n)}return this.decorationsByTypeThenRowsCache=t,t}invalidateDecorationForScreenRowsCache(){this.decorationsByTypeThenRowsCache=null}decorateMarker(t,e){if(this.destroyed||null==t)return;const{id:n}=t;"highlight"===e.type&&(e.type="highlight-over");const{type:i,plugin:r}=e;if(null==r&&(e.plugin=this.getOriginatorPackageName()),null==e.scope&&null!=e.class){const t=e.class.split(" ").join(".");e.scope=`.minimap .${t}`}null==this.decorationMarkerDestroyedSubscriptions[n]&&(this.decorationMarkerDestroyedSubscriptions[n]=t.onDidDestroy((()=>{this.removeAllDecorationsForMarker(t)}))),null==this.decorationMarkerChangedSubscriptions[n]&&(this.decorationMarkerChangedSubscriptions[n]=t.onDidChange((e=>{const r=this.decorationsByMarkerId[n],o=t.getScreenRange();if(this.invalidateDecorationForScreenRowsCache(),null!=r)for(let n=0,i=r.length;n<i;n++){const i=r[n];this.emitter.emit("did-change-decoration",{marker:t,decoration:i,event:e}),this.emitDecorationChanges(i.type,i),i.screenRange=o}let s=e.oldTailScreenPosition,a=e.oldHeadScreenPosition,u=e.newTailScreenPosition,c=e.newHeadScreenPosition;s.row>a.row&&([s,a]=[a,s]),u.row>c.row&&([u,c]=[c,u]);const l=this.computeRangesDiffs(s,a,u,c);for(let t=0,e=l.length;t<e;t++){const[e,n]=l[t];this.emitRangeChanges(i,{start:e,end:n},0)}})));const o=new Yd(t,this,e);return null==this.decorationsByMarkerId[n]&&(this.decorationsByMarkerId[n]=[]),this.decorationsByMarkerId[n].push(o),this.decorationsById[o.id]=o,null==this.decorationUpdatedSubscriptions[o.id]&&(this.decorationUpdatedSubscriptions[o.id]=o.onDidChangeProperties((t=>{this.emitDecorationChanges(i,o)}))),this.decorationDestroyedSubscriptions[o.id]=o.onDidDestroy((()=>{this.removeDecoration(o)})),this.emitDecorationChanges(i,o),this.emitter.emit("did-add-decoration",{marker:t,decoration:o}),o}getOriginatorPackageName(){const e=(new Error).stack.split("\n")[3].split("(")[1].replace(")",""),n=new RegExp(atom.packages.getPackageDirPaths().join("|")+ne.escapeRegExp(t.sep)),i=e.replace(n,"").split(t.sep)[0].replace(/minimap-|-minimap/,"");return i.indexOf(t.sep)<0?i:void 0}computeRangesDiffs(t,e,n,i){const r=[];return t.isLessThan(n)?r.push([t,n]):n.isLessThan(t)&&r.push([n,t]),e.isLessThan(i)?r.push([e,i]):i.isLessThan(e)&&r.push([i,e]),r}emitDecorationChanges(t,e){if(this.editorDestroyed())return;this.invalidateDecorationForScreenRowsCache();const n=e.screenRange;n.start&&n.end&&this.emitRangeChanges(t,n,0)}emitRangeChanges(t,e,n){const i=e.start.row,r=e.end.row,o=this.getLastVisibleScreenRow(),s=this.getFirstVisibleScreenRow();null==n&&(n=o-s-(r-i));const a={start:i,end:r,screenDelta:n,type:t};this.emitter.emit("did-change-decoration-range",a)}removeDecoration(t){if(null==t)return;const e=t.marker;let n;delete this.decorationsById[t.id],n=this.decorationUpdatedSubscriptions[t.id],null!=n&&n.dispose(),n=this.decorationDestroyedSubscriptions[t.id],null!=n&&n.dispose(),delete this.decorationUpdatedSubscriptions[t.id],delete this.decorationDestroyedSubscriptions[t.id];const i=this.decorationsByMarkerId[e.id];if(!i)return;this.emitDecorationChanges(t.getProperties().type,t);const r=i.indexOf(t);r>-1&&(i.splice(r,1),this.emitter.emit("did-remove-decoration",{marker:e,decoration:t}),0===i.length&&this.removedAllMarkerDecorations(e))}removeAllDecorationsForMarker(t){if(null==t)return;const e=this.decorationsByMarkerId[t.id];if(e){for(let n=0,i=e.length;n<i;n++){const i=e[n];this.adapter.editorDestroyed()||this.emitDecorationChanges(i.getProperties().type,i),this.emitter.emit("did-remove-decoration",{marker:t,decoration:i})}this.removedAllMarkerDecorations(t)}}removedAllMarkerDecorations(t){null!=t&&(this.decorationMarkerChangedSubscriptions[t.id].dispose(),this.decorationMarkerDestroyedSubscriptions[t.id].dispose(),delete this.decorationsByMarkerId[t.id],delete this.decorationMarkerChangedSubscriptions[t.id],delete this.decorationMarkerDestroyedSubscriptions[t.id])}removeAllDecorations(){for(const t in this.decorationMarkerChangedSubscriptions)this.decorationMarkerChangedSubscriptions[t].dispose();for(const t in this.decorationMarkerDestroyedSubscriptions)this.decorationMarkerDestroyedSubscriptions[t].dispose();for(const t in this.decorationUpdatedSubscriptions)this.decorationUpdatedSubscriptions[t].dispose();for(const t in this.decorationDestroyedSubscriptions)this.decorationDestroyedSubscriptions[t].dispose();for(const t in this.decorationsById)this.decorationsById[t].destroy();this.decorationsById={},this.decorationsByMarkerId={},this.decorationMarkerChangedSubscriptions={},this.decorationMarkerDestroyedSubscriptions={},this.decorationUpdatedSubscriptions={},this.decorationDestroyedSubscriptions={}}}function Jd(){return Gd||(Gd=!0,a(Qd={}),Kd=class{constructor(t){this.textEditor=t}enableCache(){this.useCache=!0}clearCache(){this.useCache=!1,delete this.heightCache,delete this.scrollTopCache,delete this.scrollLeftCache,delete this.maxScrollTopCache}onDidChangeScrollTop(t){return this.textEditor.onDidChangeScrollTop(t)}onDidChangeScrollLeft(t){return this.textEditor.onDidChangeScrollLeft(t)}getHeight(){return this.useCache?(this.heightCache||(this.heightCache=this.textEditor.getHeight()),this.heightCache):this.textEditor.getHeight()}getScrollTop(){return this.useCache?(this.scrollTopCache||(this.scrollTopCache=this.textEditor.getScrollTop()),this.scrollTopCache):this.textEditor.getScrollTop()}setScrollTop(t){return this.textEditor.setScrollTop(t)}getScrollLeft(){return this.useCache?(this.scrollLeftCache||(this.scrollLeftCache=this.textEditor.getScrollLeft()),this.scrollLeftCache):this.textEditor.getScrollLeft()}getMaxScrollTop(){if(null!=this.maxScrollTopCache&&this.useCache)return this.maxScrollTopCache;let t=this.textEditor.displayBuffer.getMaxScrollTop();const e=this.textEditor.getLineHeightInPixels();return this.scrollPastEnd&&(t-=this.getHeight()-3*e),this.useCache&&(this.maxScrollTopCache=t),t}editorDestroyed(){return!this.textEditor||this.textEditor.isDestroyed()}},u(Qd,"default",(function(){return Kd}))),Qd}class tf{constructor(t){this.textEditor=t,this.textEditorElement=atom.views.getView(this.textEditor)}enableCache(){this.useCache=!0}clearCache(){this.useCache=!1,delete this.heightCache,delete this.scrollTopCache,delete this.scrollLeftCache,delete this.maxScrollTopCache}onDidChangeScrollTop(t){return this.textEditorElement.onDidChangeScrollTop(t)}onDidChangeScrollLeft(t){return this.textEditorElement.onDidChangeScrollLeft(t)}getHeight(){return this.editorDestroyed()?0:this.useCache?(this.heightCache||(this.heightCache=this.textEditorElement.getHeight()),this.heightCache):this.textEditorElement.getHeight()}getScrollTop(){return this.editorDestroyed()?0:this.useCache?(this.scrollTopCache||(this.scrollTopCache=this.computeScrollTop()),this.scrollTopCache):this.computeScrollTop()}computeScrollTop(){if(this.editorDestroyed())return 0;const t=this.textEditorElement.getScrollTop(),e=this.textEditor.getLineHeightInPixels();let n=this.textEditorElement.getFirstVisibleScreenRow();if(Number.isNaN(n))return 0;let i=this.textEditorElement.pixelPositionForScreenPosition([n,0]).top;i>t&&(n-=1,i=this.textEditorElement.pixelPositionForScreenPosition([n,0]).top);return n*e+Math.min(t-i,e)}setScrollTop(t){this.editorDestroyed()||this.textEditorElement.setScrollTop(t)}getScrollLeft(){return this.editorDestroyed()?0:this.useCache?(this.scrollLeftCache||(this.scrollLeftCache=this.textEditorElement.getScrollLeft()),this.scrollLeftCache):this.textEditorElement.getScrollLeft()}getMaxScrollTop(){if(this.editorDestroyed())return 0;if(null!=this.maxScrollTopCache&&this.useCache)return this.maxScrollTopCache;let t;if(this.textEditorElement.getMaxScrollTop){if(t=this.textEditorElement.getMaxScrollTop(),parseFloat(atom.getVersion())>=1.13&&this.scrollPastEnd){const e=this.textEditor.getLineHeightInPixels();t-=this.getHeight()-3*e}}else if(t=this.textEditorElement.getScrollHeight()-this.getHeight(),this.scrollPastEnd){const e=this.textEditor.getLineHeightInPixels();t-=this.getHeight()-3*e}return this.useCache&&(this.maxScrollTopCache=t),t}editorDestroyed(){return!this.textEditor||this.textEditor.isDestroyed()||!this.textEditorElement.component||!this.textEditorElement.getModel()||!this.textEditorElement.parentNode}}let ef=1;class nf{static initClass(){return Nd(this,Xd),this}constructor(t={}){if(!t.textEditor)throw new Error("Cannot create a minimap without an editor");if(this.textEditor=t.textEditor,this.standAlone=t.standAlone,this.width=t.width,this.height=t.height,this.id=ef++,this.emitter=new o,this.subscriptions=new i,this.adapter=null,this.charHeight=null,this.configCharHeight=null,this.charWidth=null,this.configCharWidth=null,this.interline=null,this.configInterline=null,this.devicePixelRatioRounding=null,this.configDevicePixelRatioRounding=null,this.redrawDelay=0,this.destroyed=!1,this.scrollPastEnd=!1,this.pendingChangeEvents=[],this.flushChangesTimer=null,this.initializeDecorations(),null!=atom.views.getView(this.textEditor).getScrollTop)this.adapter=new tf(this.textEditor);else{atom.notifications.addWarning("LegacyAdapter of Minimap is deprecated and will be removed in the next major version. Please upgrade Atom to the latest version.");const t=Jd();this.adapter=new t(this.textEditor)}this.scrollTop=0;const e=this.subscriptions;let n=this.subscribeToConfig();e.add(n),e.add(this.textEditor.onDidChangeGrammar((()=>{e.remove(n),n.dispose(),n=this.subscribeToConfig(),e.add(n)}))),e.add(this.adapter.onDidChangeScrollTop((()=>{this.standAlone||this.ignoreTextEditorScroll||this.inChangeScrollTop||(this.inChangeScrollTop=!0,this.updateScrollTop(),this.emitter.emit("did-change-scroll-top",this),this.inChangeScrollTop=!1),this.ignoreTextEditorScroll&&(this.ignoreTextEditorScroll=!1)}))),e.add(this.adapter.onDidChangeScrollLeft((()=>{this.standAlone||this.emitter.emit("did-change-scroll-left",this)}))),e.add(this.textEditor.onDidChange((t=>{this.scheduleChanges(t)}))),e.add(this.textEditor.onDidDestroy((()=>{this.destroy()}))),e.add(this.textEditor.onDidTokenize((()=>{this.emitter.emit("did-change-config")})))}destroy(){this.destroyed||(clearTimeout(this.flushChangesTimer),this.flushChangesTimer=null,this.pendingChangeEvents=[],this.removeAllDecorations(),this.subscriptions.dispose(),this.subscriptions=null,this.textEditor=null,this.emitter.emit("did-destroy"),this.emitter.dispose(),this.destroyed=!0)}isDestroyed(){return this.destroyed}scheduleChanges(t){this.pendingChangeEvents=this.pendingChangeEvents.concat(t),this.redrawDelay||this.requestFlushChanges(),this.flushChangesTimer||(this.flushChangesTimer=setTimeout((()=>{this.requestFlushChanges()}),this.redrawDelay))}flushChanges(){clearTimeout(this.flushChangesTimer),this.flushChangesTimer=null,this.emitChanges(this.pendingChangeEvents),this.pendingChangeEvents=[]}requestFlushChanges(){this.requestedFlushChanges||(this.requestedFlushChanges=requestAnimationFrame((()=>{this.flushChanges(),this.requestedFlushChanges&&(cancelAnimationFrame(this.requestedFlushChanges),this.requestedFlushChanges=null)})))}onDidChange(t){return this.emitter.on("did-change",t)}onDidChangeConfig(t){return this.emitter.on("did-change-config",t)}onDidChangeScrollTop(t){return this.emitter.on("did-change-scroll-top",t)}onDidChangeScrollLeft(t){return this.emitter.on("did-change-scroll-left",t)}onDidChangeStandAlone(t){return this.emitter.on("did-change-stand-alone",t)}onDidDestroy(t){return this.emitter.on("did-destroy",t)}subscribeToConfig(){const t=new i,e={scope:this.textEditor.getRootScopeDescriptor()};return t.add(atom.config.observe("editor.scrollPastEnd",e,(t=>{this.scrollPastEnd=t,this.adapter.scrollPastEnd=this.scrollPastEnd,this.emitter.emit("did-change-config")}))),t.add(atom.config.observe("minimap.charHeight",e,(t=>{this.configCharHeight=t,this.updateScrollTop(),this.emitter.emit("did-change-config")}))),t.add(atom.config.observe("minimap.charWidth",e,(t=>{this.configCharWidth=t,this.updateScrollTop(),this.emitter.emit("did-change-config")}))),t.add(atom.config.observe("minimap.interline",e,(t=>{this.configInterline=t,this.updateScrollTop(),this.emitter.emit("did-change-config")}))),t.add(atom.config.observe("minimap.independentMinimapScroll",e,(t=>{this.independentMinimapScroll=t,this.updateScrollTop()}))),t.add(atom.config.observe("minimap.scrollSensitivity",e,(t=>{this.scrollSensitivity=t}))),t.add(atom.config.observe("minimap.redrawDelay",e,(t=>{this.redrawDelay=t}))),t.add(atom.config.observe("minimap.devicePixelRatioRounding",e,(t=>{this.configDevicePixelRatioRounding=t,this.updateScrollTop(),this.emitter.emit("did-change-config")}))),t}isStandAlone(){return this.standAlone}setStandAlone(t){t!==this.standAlone&&(this.standAlone=t,this.emitter.emit("did-change-stand-alone",this))}getTextEditor(){return this.textEditor}getTextEditorScaledHeight(){return this.adapter.getHeight()*this.getVerticalScaleFactor()}getTextEditorScaledScrollTop(){return this.adapter.getScrollTop()*this.getVerticalScaleFactor()}getTextEditorScaledScrollLeft(){return this.adapter.getScrollLeft()*this.getHorizontalScaleFactor()}getTextEditorMaxScrollTop(){return this.adapter.getMaxScrollTop()}getTextEditorScrollTop(){return this.adapter.getScrollTop()}setTextEditorScrollTop(t,e=!1){this.ignoreTextEditorScroll=e,this.adapter.setScrollTop(t)}getTextEditorScrollLeft(){return this.adapter.getScrollLeft()}getTextEditorHeight(){return this.adapter.getHeight()}getTextEditorScrollRatio(){return this.adapter.getScrollTop()/(this.getTextEditorMaxScrollTop()||1)}getCapedTextEditorScrollRatio(){return Math.min(1,this.getTextEditorScrollRatio())}getHeight(){return this.textEditor.getScreenLineCount()*this.getLineHeight()}getWidth(){return this.textEditor.getMaxScreenLineLength()*this.getCharWidth()}getVisibleHeight(){return Math.min(this.getScreenHeight(),this.getHeight())}getScreenHeight(){return this.isStandAlone()?null!=this.height?this.height:this.getHeight():this.adapter.getHeight()}getVisibleWidth(){return Math.min(this.getScreenWidth(),this.getWidth())}getScreenWidth(){return this.isStandAlone()&&null!=this.width?this.width:this.getWidth()}setScreenHeightAndWidth(t,e){this.width===e&&this.height===t||(this.height=t,this.width=e,this.updateScrollTop())}getVerticalScaleFactor(){return this.getLineHeight()/this.textEditor.getLineHeightInPixels()}getHorizontalScaleFactor(){return this.getCharWidth()/this.textEditor.getDefaultCharWidth()}getLineHeight(){return this.getCharHeight()+this.getInterline()}getCharWidth(){return null!=this.charWidth?this.charWidth:this.configCharWidth}setCharWidth(t){this.charWidth=Math.floor(t),this.emitter.emit("did-change-config")}getCharHeight(){return null!=this.charHeight?this.charHeight:this.configCharHeight}setCharHeight(t){this.charHeight=Math.floor(t),this.emitter.emit("did-change-config")}getInterline(){return null!=this.interline?this.interline:this.configInterline}setInterline(t){this.interline=Math.floor(t),this.emitter.emit("did-change-config")}getDevicePixelRatioRounding(){return null!=this.devicePixelRatioRounding?this.devicePixelRatioRounding:this.configDevicePixelRatioRounding}setDevicePixelRatioRounding(t){this.devicePixelRatioRounding=t,this.emitter.emit("did-change-config")}getDevicePixelRatio(){return this.getDevicePixelRatioRounding()?Math.floor(devicePixelRatio):devicePixelRatio}getFirstVisibleScreenRow(){return Math.floor(this.getScrollTop()/this.getLineHeight())}getLastVisibleScreenRow(){return Math.ceil((this.getScrollTop()+this.getScreenHeight())/this.getLineHeight())}scrollIndependentlyOnMouseWheel(){return this.independentMinimapScroll}getScrollTop(){return this.standAlone||this.independentMinimapScroll?this.scrollTop:this.getScrollTopFromEditor()}setScrollTop(t){this.scrollTop=Math.max(0,Math.min(this.getMaxScrollTop(),t)),(this.standAlone||this.independentMinimapScroll)&&this.emitter.emit("did-change-scroll-top",this)}getScrollRatio(){return this.getScrollTop()/this.getMaxScrollTop()}updateScrollTop(){if(this.independentMinimapScroll){try{this.setScrollTop(this.getScrollTopFromEditor())}catch(t){}this.emitter.emit("did-change-scroll-top",this)}}getScrollTopFromEditor(){return Math.abs(this.getCapedTextEditorScrollRatio()*this.getMaxScrollTop())}getMaxScrollTop(){return Math.max(0,this.getHeight()-this.getScreenHeight())}canScroll(){return this.getMaxScrollTop()>0}onMouseWheel(t){if(this.scrollIndependentlyOnMouseWheel()){if(t.stopPropagation(),!this.canScroll())return;const{wheelDeltaY:e}=t,n=this.getScrollTop()-Math.round(e*this.scrollSensitivity);t.preventDefault(),this.setScrollTop(n)}}getMarker(t){return this.textEditor.getMarker(t)}findMarkers(t){try{return this.textEditor.findMarkers(t)}catch(t){return[]}}markBufferRange(t){return this.textEditor.markBufferRange(t)}emitChanges(t){this.emitter.emit("did-change",t)}enableCache(){this.adapter.enableCache()}clearCache(){this.adapter.clearCache()}editorDestroyed(){this.adapter.editorDestroyed()}}exports.Minimap=nf,nf.initClass();var rf={};exports.config=rf,rf=JSON.parse('{"plugins":{"type":"object","properties":{}},"autoToggle":{"title":"Show Minimap On Atom Start","type":"boolean","default":true,"order":1},"displayMinimapOnLeft":{"type":"boolean","default":false,"order":2},"displayCodeHighlights":{"type":"boolean","default":true,"description":"Toggles the render of the buffer tokens in the minimap.","order":3},"displayPluginsControls":{"type":"boolean","default":true,"description":"You need to restart Atom for this setting to be effective.","order":4},"minimapScrollIndicator":{"type":"boolean","default":true,"description":"Toggles the display of a side line showing which part of the buffer is currently displayed by the minimap. This side line will only appear if the minimap is taller than the editor view height.","order":5},"adjustMinimapWidthToSoftWrap":{"type":"boolean","default":true,"description":"If this option is enabled and Soft Wrap is checked then the Minimap max width is set to the Preferred Line Length value.","order":6},"adjustMinimapWidthOnlyIfSmaller":{"type":"boolean","default":true,"description":"If this option and `adjustMinimapWidthToSoftWrap` are enabled the minimap width will never go past the limit sets by CSS. On the other hand, when disabled the minimap will expand to honor the preferred line width.","order":7},"ignoreWhitespacesInTokens":{"type":"boolean","default":false,"description":"When enabled, text editor tokens are rendered as plain blocks, with no regards to the whitespaces they contains.","order":8},"charWidth":{"type":"number","default":1,"minimum":0.5,"order":9},"charHeight":{"type":"number","default":2,"minimum":0.5,"order":10},"interline":{"type":"number","default":1,"minimum":0,"description":"The space between lines in the minimap in pixels.","order":11},"textOpacity":{"type":"number","default":0.6,"minimum":0,"maximum":1,"description":"The opacity used to render the line\'s text in the minimap.","order":12},"moveCursorOnMinimapClick":{"type":"boolean","default":false,"description":"Moves the cursor to the beginning of the target line when clicking on the minimap","order":13},"independentMinimapScroll":{"type":"boolean","title":"Independent Minimap Scroll On Mouse Wheel Events","default":false,"description":"When enabled, using the mouse wheel over the Minimap will make it scroll independently of the text editor. The Minimap will still sync with the editor whenever the editor is scrolled, but it will no longer relay the mouse wheel events to the editor.","order":14},"scrollSensitivity":{"type":"number","default":0.5,"description":"The scrolling speed when the `Independent Minimap Scroll On Mouse Wheel Events` setting is enabled.","order":15},"smoothScrolling":{"type":"boolean","default":false,"description":"Whether to offset the minimap canvas when scrolling to keep the scroll smooth. When `true` the minimap canvas will be offseted, resulting in a smoother scroll, but with the side-effect of a blurry minimap when the canvas is placed between pixels. When `false` the canvas will always stay at the same position, and will never look blurry, but the scroll will appear more jagged.","order":16},"createPluginInDevMode":{"type":"boolean","default":false,"order":17},"absoluteMode":{"type":"boolean","default":false,"description":"When enabled the text editor content will be able to flow below the minimap.","order":18},"adjustAbsoluteModeHeight":{"type":"boolean","default":false,"description":"When enabled and `Absolute Mode` is also enabled, the minimap height will be adjusted to only take the space required by the text editor content, leaving the space below triggering mouse events on the text editor. **Be aware this can have some impact on performances as the minimap canvases will be resized every time a change in the editor make its height change.**","order":19},"redrawDelay":{"type":"number","default":400,"minimum":0,"maximum":2000,"description":"Controls how often (in ms) the minimap should redraw itself after changing the text editor\'s contents. Setting this to 100ms or higher could dramatically improve editor responsiveness when working with large files. A value of 0 will cause the minimap to redraw itself immediately on each change.","order":20},"devicePixelRatioRounding":{"type":"boolean","default":true,"description":"Toggles the rounding of the devicePixelRatio in the minimap.","order":21},"useHardwareAcceleration":{"type":"boolean","default":true,"order":22},"scrollAnimation":{"type":"boolean","default":false,"description":"Enables animations when scrolling by clicking on the minimap.","order":23},"scrollAnimationDuration":{"type":"integer","default":300,"description":"The duration of scrolling animations when clicking on the minimap.","order":24},"maxTokensInOneLine":{"type":"integer","default":160,"description":"The maximum number of tokens that are rendered for each line.","order":25}}'),exports.config=rf;const of={};exports.plugins=of;const sf={},af={};function uf(t,e){of[t]=e,sf[t]=new i;const n={name:t,plugin:e};xf.emit("did-add-plugin",n),atom.config.get("minimap.displayPluginsControls")&&function(t,e){const n=`minimap.plugins.${t}`,i=`minimap.plugins.${t}DecorationsZIndex`,r=Tf();r.plugins.properties[t]={type:"boolean",title:t,description:`Whether the ${t} plugin is activated and displayed in the Minimap.`,default:!0},r.plugins.properties[`${t}DecorationsZIndex`]={type:"integer",title:`${t} decorations order`,description:`The relative order of the ${t} plugin's decorations in the layer into which they are drawn. Note that this order only apply inside a layer, so highlight-over decorations will always be displayed above line decorations as they are rendered in different layers.`,default:0},void 0===atom.config.get(n)&&atom.config.set(n,!0);void 0===atom.config.get(i)&&atom.config.set(i,0);sf[t].add(atom.config.observe(n,(()=>{df(t)}))),sf[t].add(atom.config.observe(i,(n=>{gf(t);const i={name:t,plugin:e,order:n};xf.emit("did-change-plugin-order",i)}))),sf[t].add(atom.commands.add("atom-workspace",{[`minimap:toggle-${t}`]:()=>{lf(t)}})),gf(t)}(t,e),df(t)}function cf(t){const e=of[t];atom.config.get("minimap.displayPluginsControls")&&function(t){sf[t].dispose(),delete sf[t],delete Tf().plugins.properties[t]}(t),delete of[t];const n={name:t,plugin:e};xf.emit("did-remove-plugin",n)}function lf(t,e){const n=`minimap.plugins.${t}`;null!=e?atom.config.set(n,e):atom.config.set(n,!atom.config.get(n)),df(t)}function hf(){for(const[t,e]of function*(){for(const t in of)yield[t,of[t]]}())e.deactivatePlugin(),xf.emit("did-deactivate-plugin",{name:t,plugin:e})}function df(t){const e=of[t],n=e.isActive(),i=atom.config.get(`minimap.plugins.${t}`);atom.config.get("minimap.displayPluginsControls")?i&&!n?ff(t,e):n&&!i&&pf(t,e):n?n&&pf(t,e):ff(t,e)}function ff(t,e){const n={name:t,plugin:e};e.activatePlugin(),xf.emit("did-activate-plugin",n)}function pf(t,e){const n={name:t,plugin:e};e.deactivatePlugin(),xf.emit("did-deactivate-plugin",n)}function gf(t){const e=`minimap.plugins.${t}DecorationsZIndex`;af[t]=atom.config.get(e)}function mf(){return af}exports.registerPlugin=uf,exports.unregisterPlugin=cf,exports.togglePluginActivation=lf,exports.deactivateAllPlugins=hf,exports.activatePlugin=ff,exports.deactivatePlugin=pf,exports.getPluginsOrder=mf;let vf=!1,yf=!1,bf=null,Sf=null,wf=null;const xf=new o;function Cf(t){if(t instanceof nf){const e=new Vd;return e.setModel(t),e}}exports.emitter=xf,exports.activate=function(){vf||(wf=atom.commands.add("atom-workspace",{"minimap:toggle":()=>{kf()},"minimap:generate-coffee-plugin":async()=>{await Df("coffee")},"minimap:generate-javascript-plugin":async()=>{await Df("javascript")},"minimap:generate-babel-plugin":async()=>{await Df("babel")}}),bf=new Map,Sf=new i,vf=!0,atom.config.get("minimap.autoToggle")&&kf())},exports.minimapViewProvider=Cf,exports.deactivate=function(){vf&&(hf(),bf&&bf.forEach(((t,e)=>{t.destroy(),bf.delete(e)})),Sf.dispose(),Sf=null,wf.dispose(),wf=null,bf=void 0,yf=!1,vf=!1)};var Ef=s(rf);function Tf(){return Ef||atom.packages.getLoadedPackage("minimap").metadata.configSchema}function kf(){vf&&(yf?(yf=!1,bf&&bf.forEach(((t,e)=>{t.destroy(),bf.delete(e)})),Sf.dispose()):(yf=!0,Sf.add(atom.workspace.observeTextEditors((t=>{const e=Ff(t),n=atom.views.getView(e);xf.emit("did-create-minimap",e),n.attach()})))))}async function Df(t){const{default:e}=await $d(),n=new e;n.template=t,n.attach()}function Mf(t){return xf.on("did-activate",t)}function Lf(t){return xf.on("did-deactivate",t)}function Af(t){return xf.on("did-create-minimap",t)}function Rf(t){return xf.on("did-add-plugin",t)}function Of(t){return xf.on("did-remove-plugin",t)}function _f(t){return xf.on("did-activate-plugin",t)}function Pf(t){return xf.on("did-deactivate-plugin",t)}function If(t){return xf.on("did-change-plugin-order",t)}function Hf(){return nf}function Nf(t){if(t)return Ff(t.getModel())}function Ff(t){if(!t)return;if(!bf)return;let e=bf.get(t);if(!e){e=new nf({textEditor:t}),bf.set(t,e);const n=t.onDidDestroy((()=>{bf&&bf.delete(t),n.dispose()}))}return e}function jf(t){if(t)return new nf({textEditor:t,standAlone:!0})}function Wf(){return Ff(atom.workspace.getActiveTextEditor())}function Bf(t){if(t)return bf&&bf.forEach((e=>{t(e)})),Af((e=>{t(e)}))}exports.getConfigSchema=Tf,exports.toggle=kf,exports.onDidActivate=Mf,exports.onDidDeactivate=Lf,exports.onDidCreateMinimap=Af,exports.onDidAddPlugin=Rf,exports.onDidRemovePlugin=Of,exports.onDidActivatePlugin=_f,exports.onDidDeactivatePlugin=Pf,exports.onDidChangePluginOrder=If,exports.minimapClass=Hf,exports.minimapForEditorElement=Nf,exports.minimapForEditor=Ff,exports.standAloneMinimapForEditor=jf,exports.getActiveMinimap=Wf,exports.observeMinimaps=Bf;const qf={minimapViewProvider:Cf,getConfigSchema:Tf,onDidActivate:Mf,onDidDeactivate:Lf,onDidCreateMinimap:Af,onDidAddPlugin:Rf,onDidRemovePlugin:Of,onDidActivatePlugin:_f,onDidDeactivatePlugin:Pf,onDidChangePluginOrder:If,minimapClass:Hf,minimapForEditorElement:Nf,minimapForEditor:Ff,standAloneMinimapForEditor:jf,getActiveMinimap:Wf,observeMinimaps:Bf,registerPlugin:uf,unregisterPlugin:cf,togglePluginActivation:lf,deactivateAllPlugins:hf,activatePlugin:ff,deactivatePlugin:pf,getPluginsOrder:mf};exports.provideMinimapServiceV1=function(){return qf},exports.$630b64a620858fc94db34491a5fda495$init=function(){return ne},exports.$24e639f394ed48f2a0a4cd8d3bbf07d9$init=function(){return Fd};
//# sourceMappingURL=main.js.map
